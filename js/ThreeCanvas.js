var THREE = THREE || {}; if（！self.Int32Array）self.Int32Array = Array，self.Float32Array = Array; THREE.Color = function（a）{a！== void 0 && this.setHex（a）; return此}; THREE.Color.prototype = {构造：THREE.Color，R：1，G 1，b：1，复制：函数（）{this.r = AR; this.g = AG; this.b = ab; return this}，copyGammaToLinear：function（a）{this.r = ar * ar; this.g = ag * ag; this.b = ab * ab; return this}，copyLinearToGamma：function（a）{this .r = Math.sqrt（ar）; this.g = Math.sqrt（ag）; this.b = Math.sqrt（ab）; return this}，setRGB：function（a，b，c）{this.r = a; this.g = b; this.b = c; return this}，setHSV：function（a，b，c）{var d，f，e; if（c === 0）this.r = this .g = this.b = 0; else switch（d = Math.floor（a * 6），f = a * 6-d，a = c *（1-b），e = c *
b * f），b = c *（1-b *（1-f）），d）{case 1：this.r = e; this.g = c; this.b = a; break; case 2： this.r = a; this.g = c; this.b = b; break; case 3：this.r = a; this.g = e; this.b = c; break; case 4：this.r = b; this.g = a; this.b = c; break; case 5：this.r = c; this.g = a; this.b = e; break; case 6：case 0：this.r = c ，this.g = b，this.b = a} return this}，setHex：function（a）{a = Math.floor（a）; this.r =（a >> 16＆255）/255;this.g= （a >> 8＆255）/255;this.b=(a＆255）/ 255; return this}，getHex：function（）{return ~~（this.r * 255）<< 16 ^ ~~（this.g * 255）<< 8 ^ ~~（this.b * 255）}，getContextStyle：函数（）{返回 “RGB（” +
Math.floor（this.r * 255）+ “ ”+ Math.floor（this.g * 255）+“， ”+ Math.floor（this.b * 255）+“）”}，克隆：功能（ ）{return（new THREE.Color）.setRGB（this.r，this.g，this.b）}}; THREE.Vector2 = function（a，b）{this.x = a || 0; this.y = b || 0}; THREE.Vector2.prototype = {构造函数：THREE.Vector2，set：function（a，b）{this.x = a; this.y = b; return this}，copy：function（a ）{this.x = ax; this.y = ay; return this}，clone：function（）{return new THREE.Vector2（this.x，this.y）}，add：function（a，b）{this .x = a.x + bx; this.y = a.y + by; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; return this}，sub：function（ a，b）{this.x = ax-bx; this.y = ay-by; return this}，subSelf：function（a）{this.x- = ax; this.y- = ay; return this}， multiplyScalar：function（a）{this.x * = a; this.y * = a; return this}，divideScalar：function（a）{a？（this.x / = a，this.y / = a）： this.set（0,0）; return this}，否定：function（）{return this。multiplyScalar（-1）}，dot：function（a）{return this.x * a.x + this.y * ay}，lengthSq：function（）{return this.x * this.x + this.y * this .y}，length：function（）{return Math.sqrt（this.lengthSq（））}，normalize：function（）{return this.divideScalar（this.length（））}，distanceTo：function（a）{return Math.sqrt（this.distanceToSquared（a））}，distanceToSquared：function（a）{var b = this.xa.x，a = this.ya.y; return b * b + a * a}，setLength：function （a）{return this.normalize（）。multiplyScalar（a）}，equals：function（a）{return axe === this.x && a.y === this.y}}; THREE.Vector3 = function（a ，b，C）{this.x =一个|| 0; this.y = b || 0; this.z = C || 0}; THREE.Vector3.prototype = {构造：THREE.Vector3，SET：功能（a，b，c）{this.x = a; this.y = b; this.z = c; return this}，setX：function（a）{this.x = a; return this}，setY：function （a）{this.y = a; return this}，setZ：function（a）{this.z = a; return this}，copy：function（a）{this.x = ax; this.y = ay; this.z = AZ;（this，this.y，this.z）}，add：function（a，b）{this.x = a.x + bx; this .y = a.y + by; this.z = a.z + bz; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; return this }，addScalar：function（a）{this.x + = a; this.y + = a; this.z + = a; return this}，sub：function（a，b）{this.x = ax-bx; this。 y = ay-by; this.z = az-bz; return this}，subSelf：function（a）{this.x- = ax; this.y- = ay; this.z- = az; return this}， multiply：function（a，b）{this.x = ax * bx; this.y = ay * by; this.z = az * bz; return this}，multiplySelf：function（a）{this.x * = ax ; this.y * = ay; this.z * = az; return this}，multiplyScalar：function（a）{this.x * = a; this.y * = a; this.z * = a; return this} ，divideSelf：function（a）{this.x / = ax; this.y / = ay; this.z / = az; return this}，divideScalar：function（a）{a？（this.x / = a， this.y / = a，this.z / = a）：this.z = this.y = this.x = 0; return this}，否定：function（）{return this。multiplyScalar（-1）}，dot：function（a）{return this.x * a.x + this.y * a.y + this.z * az}，lengthSq：function（）{return this.x * this .x + this.y * this.y + this.z * this.z}，length：function（）{return Math.sqrt（this.lengthSq（））}，lengthManhattan：function（）{return this.x + this.y + this.z}，normalize：function（）{return this.divideScalar（this.length（））}，setLength：function（a）{return this.normalize（）。multiplyScalar（a）}，cross：函数（a，b）{this.x = ay * bz-az * by; this.y = az * bx-ax * bz; this.z = ax * by-ay * bx; return this}，crossSelf：function （a）{var b = this.x，c = this.y，d = this.z; this.x = c * az-d * ay; this.y = d * ax-b * az; this.z = a * ay-c * ax; return this}，distanceTo：function（a）{return Math.sqrt（this.distanceToSquared（a））}，distanceToSquared：function（a）{return（new THREE.Vector3）.sub （这一点，一个）.lengthSq（）}，setPositionFromMatrix：函数（）{this.x = a.n14; this.y = a.n24; this.z = a.n34}，setRotationFromMatrix：函数（a）{var b = Math.cos（this.y）; this.y = Math.asin（a.n13）; Math.abs（b）> 1.0E-5？（this.x = Math.atan2 （-a.n23并/ b，a.n33 / b），this.z = Math.atan2（-a.n12并/ b，a.n11 / b））:( this.x = 0，this.z =数学.atan2（a.n21，a.n22））}，isZero：function（）{return this.lengthSq（）<1.0E-4}}; THREE.Vector4 = function（a，b，c，d）{this .x = a || 0; this.y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor ：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（ a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE.Vector4（this .X，this.y，this.z，this.w）}，添加：功能（A，b）{this.x = a.x + BX; this.y = a.y +通过; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw ; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = az-COS（this.y）; this.y = Math.asin（a.n13）; Math.abs（B）> 1.0E-5（this.x = Math.atan2（-a.n23 / B，A？。 N33 / b），this.z = Math.atan2（-a.n12并/ b，a.n11 / b））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22 ）），isZero：function（）{return this.lengthSq（）<1.0E-4}}; THREE.Vector4 = function（a，b，c，d）{this.x = a || 0; this。 y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a ，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this .y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z ，this.w）}，添加：功能（A，b）{this.x = a.x + BX; this.y = a.y +通过; this.z = a.z + BZ; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a ，b）{this.x = AX-BX; this.y = AY-通过; this.z = AZ-COS（this.y）; this.y = Math.asin（a.n13）; Math.abs（B）> 1.0E-5（this.x = Math.atan2（-a.n23 / B，A？。 N33 / b），this.z = Math.atan2（-a.n12并/ b，a.n11 / b））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22 ）），isZero：function（）{return this.lengthSq（）<1.0E-4}}; THREE.Vector4 = function（a，b，c，d）{this.x = a || 0; this。 y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a ，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this .y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z ，this.w）}，添加：功能（A，b）{this.x = a.x + BX; this.y = a.y +通过; this.z = a.z + BZ; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a ，b）{this.x = AX-BX; this.y = AY-通过; this.z = AZ-Math.abs（B）> 1.0E-5'（this.x = Math.atan2（-a.n23并/ b，a.n33 / B），this.z = Math.atan2（-a.n12并/ b， a.n11 / b））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22））}，isZero：function（）{return this.lengthSq（）<1.0E- 4}}; THREE.Vector4 =函数（A，b，C，d）{this.x =一个|| 0; this.y = b || 0; this.z = C || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0：aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z，this.w）}，add：function（a，b）{this.x = a.x + bx; this.y = a.y + by; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = AZ-Math.abs（B）> 1.0E-5'（this.x = Math.atan2（-a.n23并/ b，a.n33 / B），this.z = Math.atan2（-a.n12并/ b， a.n11 / b））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22））}，isZero：function（）{return this.lengthSq（）<1.0E- 4}}; THREE.Vector4 =函数（A，b，C，d）{this.x =一个|| 0; this.y = b || 0; this.z = C || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0：aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z，this.w）}，add：function（a，b）{this.x = a.x + bx; this.y = a.y + by; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = AZ-ATAN2（-a.n12并/ b，a.n11 / B））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22））}，isZero：函数（）{返回this.lengthSq（）<1.0E-4}}; THREE.Vector4 =函数（A，b，C，d）{this.x =一个|| 0; this.y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z，this.w）}，add：function（ a，b）{this.x = a.x + bx; this.y = a.y + by; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf ：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a，b）{this.x = ax-bx ; this.y = AY-通过; this.z = AZ-ATAN2（-a.n12并/ b，a.n11 / B））:( this.x = 0，this.z = Math.atan2（a.n21，a.n22））}，isZero：函数（）{返回this.lengthSq（）<1.0E-4}}; THREE.Vector4 =函数（A，b，C，d）{this.x =一个|| 0; this.y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4.prototype = {constructor：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE.Vector4（this.x，this.y，this.z，this.w）}，add：function（ a，b）{this.x = a.x + bx; this.y = a.y + by; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf ：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this.w + = aw; return this}，sub：function（a，b）{this.x = ax-bx ; this.y = AY-通过; this.z = AZ-d）{this.x = a || 0; this.y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4。原型= {构造函数：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}， copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE .Vector4（this.x，this.y，this.z，this.w）}，添加：功能（A，b）{this.x = a.x + BX; this.y = a.y +通过; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this .w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = az-d）{this.x = a || 0; this.y = b || 0; this.z = c || 0; this.w = d！== void 0？d：1}; THREE.Vector4。原型= {构造函数：THREE.Vector4，set：function（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}， copy：function（a）{this.x = ax; this.y = ay; this.z = az; this.w = aw！== void 0？aw：1}，clone：function（）{return new THREE .Vector4（this.x，this.y，this.z，this.w）}，添加：功能（A，b）{this.x = a.x + BX; this.y = a.y +通过; this.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this .w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = az-的Vector4（this.x，this.y，this.z，this.w）}，添加：功能（A，B）{this.x = a.x + BX; this.y = a.y +通过;该.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this。 w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = az-的Vector4（this.x，this.y，this.z，this.w）}，添加：功能（A，B）{this.x = a.x + BX; this.y = a.y +通过;该.z = a.z + bz; this.w = a.w + bw; return this}，addSelf：function（a）{this.x + = ax; this.y + = ay; this.z + = az; this。 w + = aw; return this}，sub：function（a，b）{this.x = ax-bx; this.y = ay-by; this.z = az-
bz; this.w = aw-bw; return this}，subSelf：function（a）{this.x- = ax; this.y- = ay; this.z- = az; this.w- = aw; return this}，multiplyScalar：function（a）{this.x * = a; this.y * = a; this.z * = a; this.w * = a; return this}，divideScalar：function（a）{a ？（this.x / = A，this.y / = A，this.z / = A，this.w / =一）:( this.z = this.y = this.x = 0，this.w = 1）; return this}，negate：function（）{return this.multiplyScalar（-1）}，dot：function（a）{return this.x * a.x + this.y * a.y + this.z *返回this.dot（this）}，length：function（）{return Math.sqrt（this.lengthSq（））}，normalize：function（） ）{return this.divideScalar（this.length（））}，setLength：function（a）{return this.normalize（）。multiplyScalar（a）}，lerpSelf：function（a，b）{this.x + =（ax -this.x）* b; this.y + =（AY-this.y）* b; this.z + =（AZ-this.z）* b; this.w + =（AW-this.w）* b;返回this}}; THREE.Ray = function（a，b）{function c（a，b，c）{i.sub（c，a）; p = i.dot（b）; if（p <= 0）return null; k = n.add（a，o.copy（b）.multiplyScalar（p））; return s = c.distanceTo（k）} function d（a，b，c，d）{i .SUB（d，b）; n.sub（C，b）; o.sub（A，b）; K = i.dot（I）; C = i.dot（N）; Q = i.dot（ O）; O = n.dot（N）; W = n.dot（O）; F = 1 /（K * OC * C）; Z =（O * QC * W）* F; d =（K * wC * Q）* F; return z> = 0 && D> = 0 && z + D <1} this.origin = a || new THREE.Vector3; this.direction = b || new THREE.Vector3; this.intersectScene = function a）{return this.intersectObjects（a.children）}; this.intersectObjects = function（a）{var b，c，d = []; b = 0; for（c = a.length; b <c; b ++ ）Array.prototype.push.apply（d，this.intersectObject（a [b]））; d.sort（function（a，b）{return a.distance-b.distance}）; return d}; var f = new THREE.Vector3，e = new THREE.Vector3，g = new THREE.Vector3，h = new THREE.Vector3，a = new THREE.Vector3，b = new THREE.Vector3，m = new THREE.Vector3，l = new THREE.Vector3，j = new THREE.Vector3; this.intersectObject = function（k）{for（var i，o = []，n = 0，W = k。Array.prototype.push.apply（o，this.intersectObject（k.children [n]））; if（k instanceof THREE.Particle）{n = c（this.origin， this.direction，k.matrixWorld.getPosition（））;如果（N ===空|| N> k.scale.x）返回[]; I = {距离：N，点：k.position，脸：空，object：k}; o.push（i）} else if（k instanceof THREE.Mesh）{n = c（this.origin，this.direction，k.matrixWorld.getPosition（））; if（n === null || n> k.geometry.boundingSphere.radius * Math.max（k.scale.x，Math.max（k.scale.y，k.scale.z）））return o; var p，G = k .geometry，H = G.vertices，I; k.matrixRotationWorld.extractRotation（k.matrixWorld）; N = 0;对于（W = G.faces.length; N <W; N ++）如果（= G.faces [ N]，a.copy（this.origin），b.copy（this.direction），I = k.matrixWorld中，m = I.multiplyVector3（m.copy（i.centroid））。subSelf（a）中，p = m.dot（b）中，！（p <= 0）&&（F = I.multiplyVector3（f.copy（H [IA] .POSITION））中，e = I.multiplyVector3（e.copy（H [IB]。位置）），g = I.multiplyVector3（g.copy（H [ic] .position）），I instanceof THREE.Face4 &&（h = I.multiplyVector3（h.copy（H [id] .position））），l = k.matrixRotationWorld .multiplyVector3（l.copy（i.normal））中，p = b.dot（升），k.doubleSided ||（k.flipSided p> 0：p <0）））如果（p值= l.dot（ m（sub，f，a））/ p，j.add（a，b.multiplyScalar（p）），I instanceof THREE.Face3）d（j，f，e，g）&&（i = {distance：a .distanceTo（j），point：j.clone（），face：i，object：k}，o.push（i））;否则if（例如THREE.Face4 &&（d（j，f，e，h） || d（J，E，G，H）））I = {距离：a.distanceTo（j）中，点：j.clone（），面：。对象：K}，o.push（。} return o}; var i = new THREE.Vector3，n = new THREE.Vector3，o = new THREE.Vector3，p，k，s，K，C，Q，O，w，F，z，D}; THREE .Rectangle = function（）{function a（）{e = db; g = fc} var b，c，d，f，e，g，h =！0; this.getX = function（）{return b}; this.getY = function（）{return c}; this.getWidth = function（）{return e}; this.getHeight = function（）{return g}; this。getLeft = function（）{return b}; this.getTop = function（）{return c}; this.getRight = function（）{return d}; this.getBottom = function（）{return f}; this.set =功能（E，G，J，I）{H = 1;！b =?; C =克; d = j的; F = I;一（）}; this.addPoint =函数（E，G）{H？ （！H = 1，b = E，C =克，d = E，F = G）:( b = b <E b：E，C = C <克C：？克，d = d> E' d：E，F = F>克F：？！克）;一（）}; this.add3Points =函数（E，G，J，I，N，O）{H（H = 1，b = E置于<J?<N E：？N：【J <N Y：N，C =克<I G <?克：α，α：<O I：α，α，d = E>?E>? ？E：N：【J>?Y：N，F = g>的I G> 0 G：α，α：I> O I：？？？O）:( b = E置于<J?<N个E <b ？E：b：?<b n的：b：【J <N?<b？J：b：N <b n的：b，C = G <I G <?克<C G：C 18 ：○<C O：C：我<O I <C I：C：○<C 2 O：C，d = E>?E> N个E> d E：？d：N> d ？N：d：J>时?J>时d？J：d：N> d N：？d，F = g>的I G> 0克> F G：？？？F：O>?F○：・F ：I> O I> F I：F：○>?F○：？？？？F）;一（）}; this.addRectangle =函数（E）{H（H = 1，b = e.getLeft（！ ），C = e.getTop（），d = e.getRight（）中，f = e.getBottom（））:( b = b <E。getLeft（）B：e.getLeft（），C = C <e.getTop（）C：e.getTop（），d = d> e.getRight（）d：e.getRight（）中，f =的ΔF> e.getBottom（）F：e.getBottom（））; A（）}; this.inflate =函数（E）{B- = E; C- = E; d + = E; F + = E;一个（）}; this.minSelf =函数（E）{b => e.getLeft（）b：e.getLeft（）; C = C> e.getTop（）C：e.getTop（）; d ？= d <e.getRight（）d：e.getRight（）; F = F <e.getBottom（）F：e.getBottom（）;一（）}; this.intersects =函数（）{返回？ Math.min（d，a.getRight（）） -  Math.max（b，a.getLeft（））> = 0 && Math.min（F，a.getBottom（）） -  Math.max（C，a.getTop（ ））> = 0}; this.empty = function（）{h =！0; f = d = c = b = 0; a（）}; this.isEmpty = function（）{return h}}; THREE。 Math = {clamp：function（a，b，c）{return a <b？b：a> c？c：a}，clampBottom：function（a，b）{return a <b？b：a}，mapLinear ：function（a，b，c，d，f）{return d +（ab）*（fd）/（cb）}，random16：function（）{return（65280 * Math.random（）+ 255 * Math.random （））/ 65535}}; THREE.Matrix3 =函数（）{this.m = []};THREE.Matrix3.prototype = {constructor：THREE.Matrix3，transpose：function（）{var a，b = this.m; a = b [1]; b [1] = b [3]; b [3] =一个; A = b [2]; b [2] = b [6]; b [6] = A; A = b [5]; b [5] = b [7]; b [7] = A;返回this}，transposeIntoArray：function（a）{var b = this.m; a [0] = b [0]; a [1] = b [3]; a [2] = b [6]; a [ 3] = b [1];一个[4] = b [4];一个[5] = b [7];一个[6] = b [2];一个[7] = b [5]; A [ （a，b，c，d，f，e，g，h，m，l，j，i，n，o，p，k） ）{this.set（a！== void 0？a：1，b || 0，c || 0，d || 0，f || 0，e！== void 0？e：1，g | | 0，h || 0，m || 0,1 || 0，j！== void 0？j：1，i || 0，n || 0，0 || 0，p || 0，k ！== void 0？k：1）; this.flat = Array（16）; this.m33 = new THREE.Matrix3}; THREE.Matrix4.prototype = {constructor：THREE.Matrix4，set：function（a，b ，C，d，F，E，G，H，M，L，J，I，N，O，p，K）{this.n11 =一个; this.n12 = b; this.n13 = C;此。 N14 = d; this.n21 = F; this.n22 = E; this.n23 =克; this.n24 = H; this.n31 =米; this.n32 = 1; this.n33 = j的; this.n34 = i; this.n41 = n; this.n42 = o; this.n43 = p; this.n44 = k; return this}，identity：function（）{this.set（1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1）; return this}，copy：function（a ）{this.set（a.n11，a.n12，a.n13，a.n14，a.n21，a.n22，a.n23，a.n24，a.n31，a.n32，a.n33， a.n34，a.n41，a.n42，a.n43，a.n44）; return this}，lookAt：function（a，b，c）{var d = THREE.Matrix4 .__ v1，f = THREE.Matrix4 .__ V2，E = THREE.Matrix4 .__ V3; e.sub（A，b）.normalize（）;如果（e.length（）=== 0）EZ = 1; d.cross（C，E）.normalize （）; d.length（）=== 0 &&（e.x + = 1.0E-4，d.cross（C，E）.normalize（））; f.cross（E，d）.normalize（）;此.n11 = DX; this.n12 = FX; this.n13 = EX; this.n21 = DY; this.n22 = FY; this.n23 = EY; this.n31 = DZ; this.n32 = FZ; this.n33 = ez; return this}，multiply：function（a，b）{var c = a.n11，d = a.n12，f = a.n13，e = a.n14，g = a.n21，h = a .n22中，m = a.n23，L = a.n24，J = a.n31，I = a.n32，N = a.n33，O = a.n34，p = a.n41，K = a.n42 ，S = a.n43，K = a.n44，C = b.n11，Q = b.n12，O = b.n13，W = b.n14，F = b.n21，Z = b.n22，d = b.n23，U = b.n24，R = b.n31，E = b.n32，N = b.n33，W = b.n34，DA = b.n41，G = b.n42，H = b .n43，I = b.n44; this.n11 = C * C + d * F + F * R + E * DA; this.n12 = C * Q + d * Z + F * E + E * G; this.n13 = C * O + d * d + F * N + E * H; this.n14 = C * W + d * U + F * W + E * I; this.n21 = G * C + H * F + M * R + L * DA; this.n22 = G * Q + H * Z + M * E + L * G; this.n23 = G * O + H * d + M * N + 1 * H; this.n24 = G * W + H，* U + M * W + L * I; this.n31 = j的* C + I * F + N * R + O * DA; this.n32 = j的* Q + I * Z + N * E +的O * G; this.n33 = j的* O + I * d + N * N + O * H; this.n34 = j的*瓦特+ I * U + N * W +○* I; this.n41 = p * C + K * F + S * R + K * DA; this.n42 = p * Q + K * Z + S * E + K * G; this.n43 = p * O + K * d + S * N + K * H; this.n44 = p * w + k * u + s * W + K * I; return this}，multiplySelf：function（a）{return this.multiply（this，a）}，multiplyToArray：功能（A，b，C）{this.multiply（A，b）; C [0] = this.n11; C [1] = this.n21; C [2] = this.n31; C [3] = this.n41; C [4] = this.n12; C [5] = this.n22; C [6] = this.n32; C [7] = this.n42; C [8] = this.n13; C ^ [9] = this.n23; C [10] = this.n33; C [11] = this.n43; C [12] = this.n14; C [13] = this.n24; C [14] =此.n34; c [15] = this.n44; return this}，multiplyScalar：function（a）{this.n11 * = a; this.n12 * = a; this.n13 * = a; this.n14 * = a ;这个。N21 * = A; this.n22 * = A; this.n23 * = A; this.n24 * = A; this.n31 * = A; this.n32 * = A; this.n33 * = A; this.n34 * = a; this.n41 * = a; this.n42 * = a; this.n43 * = a; this.n44 * = a; return this}，multiplyVector3：function（a）{var b = ax，c = AY，d = AZ，F = 1 /（this.n41 * b + this.n42 * C + this.n43 * d + this.n44）; AX =（this.n11 * b + this.n12 * C +这.n13 * d + this.n14）* F; AY =（this.n21 * b + this.n22 * C + this.n23 * d + this.n24）* F; AZ =（this.n31 * b +这.n32 * c + this.n33 * d + this.n34）* f; return a}，multiplyVector4：function（a）{var b = ax，c = ay，d = az，f = aw; ax = this。 N11 * b + this.n12 * C + this.n13 * d + this.n14 * F; AY = this.n21 * b + this.n22 * C + this.n23 * d + this.n24 * F; AZ = this.n31 * b + this.n32 * C + this.n33 * d + this.n34 * F; AW = this.n41 * b + this.n42 * C + this.n43 * d + this.n44 * F; return a}，rotateAxis：function（a）{var b = ax，c = ay，d = az; ax = b * this.n11 + c * this.n12 + d * this.n13; ay = b * this。 n21 + c * this.n22 + d * this.n23; az = b * this.n31 + c * this.n32 + d * this.n33; a.normalize（）; return a}，crossVector：函数（a）{var b = new THREE.Vector4; bx = this.n11 * a.x + this.n12 * a.y + this.n13 * a.z + this.n14 * aw; by = this.n21 * a.x + this.n22 * a.y + this.n23 * a.z + this.n24 * AW; BZ = this.n31 * a.x + this.n32 * a.y + this.n33 *一.z + this.n34 * aw; bw = aw？this.n41 * a.x + this.n42 * a.y + this.n43 * a.z + this.n44 * aw：1; return b}，determinant ：function（）{var a = this.n11，b = this.n12，c = this.n13，d = this.n14，f = this.n21，e = this.n22，g = this.n23，h = this.n24中，m = this.n31，L = this.n32，J = this.n33，I = this.n34，N = this.n41，O = this.n42，p = this.n43，K =此。 n44; return d * g * l * nc * h * l * nd * e * j * n + b * h * j * n + c * e * i * nb * g * i * nd * g * m * o + C * H * M * O + d * F *∫*○* H *?* OC * F * I * O + A * G * I * O + d * E *米* PB * H *米* PD * F * L * p + A * H * L * p + b * F * I * PA * E * I * PC * E *米* K + b * G *米* K + C * F * L * KA * g * l * kb * f * j * k + a * e * j * k}，transpose：function（）{var a; a = this.n21; this.n21 = this.n12; this.n12 = a ; A = this.n31; this.n31 = this.n13; this.n13 = A; A = this.n32; this.n32 = this.n23; this.n23 = A; A = this.n41; this.n41 = this.n14;此。n14 = a; a = this.n42; this.n42 = this.n24; this.n24 = a; a = this.n43; this.n43 = this.n34; this.n43 = a; return this}，clone： function（）{var a = new THREE.Matrix4; a.n11 = this.n11; a.n12 = this.n12; a.n13 = this.n13; a.n14 = this.n14; a.n21 = this。 N21; a.n22 = this.n22; a.n23 = this.n23; a.n24 = this.n24; a.n31 = this.n31; a.n32 = this.n32; a.n33 = this.n33; a.n34 = this.n34; a.n41 = this.n41; a.n42 = this.n42; a.n43 = this.n43; a.n44 = this.n44; return a}，flatten：function（）{ this.flat [0] = this.n11; this.flat [1] = this.n21; this.flat [2] = this.n31; this.flat [3] = this.n41; this.flat [4] = this.n12; this.flat [5] = this.n22; this.flat [6] = this.n32; this.flat [7] = this.n42; this.flat [8] = this.n13;这.flat [9] = this.n23; this.flat [10] = this.n33; this.flat [11] = this.n43; this.flat [12] = this.n14; this.flat [13] = this.n24; this.flat [14] = this.n34; this.flat [15] = this.n44; return this.flat}，flattenToArray：function（a）{a [0] = this.n11; a [ 1] = this.n21;一个[2] = this.n31;[3] = this.n41;一个[4] = this.n12;一个[5] = this.n22;一个[6] = this.n32;一个[7] = this.n42;一个[8] = this.n13;一个[9] = this.n23;一个[10] = this.n33;一个[11] = this.n43;一个[12] = this.n14;一个[13] = this.n24;一个[14] = this.n34; a [15] = this.n44; return a}，flattenToArrayOffset：function（a，b）{a [b] = this.n11; a [b + 1] = this.n21;一个并[b + 2] = this.n31;一个并[b + 3] = this.n41;一个并[b + 4] = this.n12;一个并[b + 5] = this.n22;一个并[b + 6] = this.n32;一个并[b + 7] = this.n42;一个并[b + 8] = this.n13;一个并[b + 9] = this.n23;一个并[b + 10] = this.n33;一个并[b + 11] = this.n43;一个并[b + 12] = this.n14;一个并[b + 13] = this.n24;一个并[b + 14] = this.n34;一个并[b + 15] = this.n44; return a}，setTranslation：function（a，b，c）{this.set（1,0,0，a，0,1,0，b，0,0,1，c，0,0 ，0,1）; return this}，setScale：function（a，b，c）{this.set（a，0,0,0,0，b，0,0,0,0，c，0,0 ，0,0,1）; return this}，setRotationX：function（a）{var b = Math.cos（a），a = Math.sin（a）; this.set（1,0,0,0， 0，b，-a，0,0，a，b，0,0,0,0,1）; return this}，setRotationY：function（a）{var b = Math.cos（a），a = Math .sin（一）; this.set（b，0，A，0,0,1，0,0，-a，0，b，0,0,0,0,1）; return this}，setRotationZ：function（a）{var b = Math.cos（a），a = Math.sin（a ）; this.set（b，-a，0,0，a，b，0,0,0,0,1,0,0,0,0,1）; return this}，setRotationAxis：function（a， b）{var c = Math.cos（b），d = Math.sin（b），f = 1-c，e = ax，g = ay，h = az，m = f * e，l = f *克; this.set（M * E + C，M * GD * H，M * H + d *克，0，M * G + d * H，L * G + C，L * HD * E，0， m * hd * g，l * h + d * e，f * h * h + c，0,0,0,0,1）; return this}，setPosition：function（a）{this.n14 = ax; this.n24 = ay; this.n34 = az; return this}，getPosition：function（）{return THREE.Matrix4 .__ v1.set（this.n14，this.n24，this.n34）}，getColumnX：function（） {return THREE.Matrix4 .__ v1.set（this.n11，this.n21，this.n31）}，getColumnY：function（）{return THREE.Matrix4 .__ v1.set（this.n12，this.n22，this.n32 ）}，getColumnZ：function（）{return THREE.Matrix4 .__ v1.set（this.n13，this.n23，this.n33）}，getInverse：function（a）{var b = a.n11，c = a。 N12，d = a.n13，F = a.n14，E = a.n21，G = a.n22，H = a.n23，M = a.n24，L = a.n31，J = a.n32，I = a.n33，N = a.n34，O = a.n41，P = a.n42，K = a.n43，S = a.n44; this.n11 = H * N *分* I * P +米*?*公斤* N * KH *∫* S + G * I * S; this.n12 = F * I * PD * N * PF *?* K + C * N * K + d *?* SC *我* S; this.n13 = d * M * PF * H * p + F * G * KC * M * KD * G * S + C * H * S; this.n14 = F * H * JD * M * JF * G * I + C *米* I + d * G * NC * H * N; this.n21 = M * I * OH * N * OM * L * K + E * N * K + H * L * SE * I * S;的this.n22 = d * N * * I * O +
F * L * kb的* N * KD *升* S + B * I * S; this.n23 = F * H * OD * M * * E的* K + B * M * K + d * E * SB * H * S; this.n24 = d * M * LF * H * L + F * E * IB * M * ID * E * N + b * H * N; this.n31 = G * N * OM *?* O + M * L * PE * N * PG * L * S + E *∫* S; this.n32 = F *∫* * L * p + b * N * p + C *升的OC * N * * SB *∫* S; this.n33 * G * O + F * E * PB * M * PC * E * S + b *克* S的= d * M *; this.n34 = F * G * LC *米* LF * E * J + b * M * J + C * E * NB * G * N; this.n41 = H *?* OG * I * OH *升* p + E * I * p + G *升* *柯?* K; this.n42 = C * I * OD *?* O + d * L * PB * I * PC * L * K + b *∫* K; this.n43 = d * G * OC * H * OD * E * p + b * H * p + C * E * kb的* G * K; this.n44 = C * H * LD * G * L + d * E * JB * H * * JC e * i + b * g * i; this.multiplyScalar（1 / a.determinant（））; return this}，setRotationFromEuler：function（a，b）{var c = ax，d = ay，f = az，e = Math.cos（c）中，C = Math.sin（c）中，G = Math.cos（d），d = Math.sin（d）中，h = Math.cos（f）中，F = Math.sin（ f）; switch（b）{case“YXZ”：var m = g * h，l = g * f，j = d * h，i = d * f; this.n11 = m + i * c; N12 = j的* CL; this.n13 = E * d; this.n21 = E * F; this.n22 = E * H; this.n23 = -c; this.n31 = L * CJ; this.n32 =我+ M * C; this.n33 = E *克;打破;案 “ZXY”：M = G * H; L = G * F; J = d * H; I = d * F; this.n11 = MI * C; this.n12 = -e * F; this.n13 = J + L * C; this.n21 = 1 + J * C; this.n22 = E * H; this.n23 = IM * C; this.n31 = -e * d; this.n32 = C; this.n33 = E *克;打破;案件 “ZYX”：M = E * H; L = E * F; J = C * H; I = C * F; this.n11 = G * H; this.n12 = j的* DL; this.n13 = M * d + I; this.n21 = G * F; this.n22 = I * d + M; this.n23 = 1 * DJ; this.n31 = -d; this.n32 = C *克; this.n33 = E *克;打破;案件 “YZX”：M = E *克; L = E * d; J = C * G; I = C * d; this.n11 = G * H; this.n12 = IM * F; this.n13 = j的* F + 1; this.n21 = F; this.n22 = E * H; this.n23 = -c * H; this.n31 = -d * H; this.n32 = 1 * F + J; this.n33 = MI * F;打破;案件 “XZY”：M = E *克; L = E * d; J = C * G; I = C * d;这.n11 = G * H; this.n12 = -f; this.n13 = d * H; this.n21 = M * F + I; this.n22 = E * H; this.n23 = L * FJ;此。 N31 = j的* FL; this.n32 = C * H; this.n33 = I * F + M;断裂;默认：M = E * H，L = E * F，J = C * H，I = C *女，this.n11 = G * H，this.n12 = -g * F，this.n13 = d，this.n21 = 1 + J * d，this.n22 = MI * d，this.n23 = -c *克，this.n31 = IM * d，this.n32 = J + L * d，这一点。setRotationFromQuaternion：function（a）{var b = ax，c = ay，d = az，f = aw，e = b + b，g = c + c，h = d + d，a = b * e，m = b * g; b * = h; var l = c * g; c * = h; d * = h; e * = f; g * = f; f * = h ; this.n11 = 1-（L + d）; this.n12 = MF; this.n13 = b + G; this.n21 = M + F; this.n22 = 1-（A + d）; this.n23 = ce; this.n31 = bg; this.n32 = c + e; this.n33 = 1-（a + 1）; return this}，scale：function（a）{var b = ax，c = ay，a = AZ; this.n11 * = b; this.n12 * = C; this.n13 * = A; this.n21 * = b; this.n22 * = C; this.n23 * = A; this.n31 * = b; this.n32 * = c; this.n33 * = a; this.n41 * = b; this.n42 * = c; this.n43 * = a; return this}，compose：function（a，b，c ）{var d = THREE.Matrix4 .__ m1，f = THREE.Matrix4 .__ m2; d.identity（）; d.setRotationFromQuaternion（b）; f.setScale（cx，cy，cz）; this.multiply（d，f ）; this.n14 = ax; this.n24 = ay; this.n34 = az; return this}，decompose：function（a，b，c）{var d = THREE.Matrix4 .__ v1，f = THREE.Matrix4。 __v2，E = THREE.Matrix4 .__ V3; d.set（this.n11，this.n21，this.n31）; f.set（this.n12，this.n22，this.n32）; e.set（this.n13，this.n23，this.n33）; a =一个THREE.Vector3实例？a：new THREE.Vector3; b = b instanceof THREE.Quaternion？b：new THREE。 Quaternion; c = c instanceof THREE.Vector3？c：new THREE.Vector3; cx = d.length（）; cy = f.length（）; cz = e.length（）; ax = this.n14; ay = this .n24; AZ = this.n34; d = THREE.Matrix4 .__ M1; d.copy（本）; d.n11 / = CX; d.n21 / = CX; d.n31 / = CX; d.n12 / = CY; d.n22 / = CY; d.n32 / = CY; d.n13 / = CZ; d.n23 / = CZ; d.n33 / = CZ; b.setFromRotationMatrix（d）;返回[A，b， c）}，extractPosition：function（a）{this.n14 = a.n14; this.n24 = a.n24; this.n34 = a.n34; return this}，extractRotation：function（a）{var b = THREE .Matrix4 .__ V1，C = 1 / b.set（a.n11，a.n21，a.n31）。长度（），d = 1 / b.set（a.n12，a.n22，a.n32） 。长度（）中，b = 1 / b.set（a.n13，a.n23，a.n33）。长度（）; this.n11 = a.n11 * C; this.n21 = a.n21 * C; this.n31 = a.n31 * C; this.n12 = a.n12 * d; this.n22 = a.n22 * d; this.n32 = a.n32 * d; this.n13 = a.n13 * b; this.n23 = a.n23 * b; this.n33 =α。n33 * b; return this}}; THREE.Matrix4.makeInvert3x3 = function（a）{var b = a.m33，c = bm，d = a.n33 * a.n22-a.n32 * a.n23，f = -a.n33 * a.n21 + a.n31 * a.n23，E = a.n32 * a.n21-a.n31 * a.n22，G = -a.n33 * a.n12 + a.n32 * a.n13，H = a.n33 * a.n11-a.n31 * a.n13中，m = -a.n32 * a.n11 + a.n31 * a.n12，L = a.n23 *一个。 N12-a.n22 * a.n13，J = -a.n23 * a.n11 + a.n21 * a.n13，I = a.n22 * a.n11-a.n21 * a.n12，A = A .n11 * d + a.n21 * g + a.n31 * l; a === 0 && console.error（“THREE.Matrix4.makeInvert3x3：Matrix not invertible。”）; a = 1 / a; c [0] =的a * d; C [1] = A * F; C [2] =一个* E; C [3] = A * G; C [4] = A * H; C [5] = A *米; C ^ [6] = a * l; c [7] = a * j; c [8] = a * i; return b}; THREE.Matrix4.makeFrustum = function（a，b，c，d，f，e） {var g; g = new THREE.Matrix4; g.n11 = 2 * f /（??ba）; g.n12 = 0; g.n13 =（b + a）/（ba）; g.n14 = 0; g .n21 = 0; g.n22 = 2 * F /（DC）; g.n23 =（d + C）/（DC）; g.n24 = 0; g.n31 = 0; g.n32 = 0;克.n33 =  - （E + F）/（EF）; g.n34 = -2 * E * F /（EF）; g.n41 = 0; g.n42 = 0; g.n43 = -1;克。 n44 = 0; return g}; THREE.Matrix4.makePerspective = function（a，b，c，d）{var f，a = c * Math.tan（a * Math.PI / 360）; f = -a; return THREE.Matrix4.makeFrustum（f * b，a * b，f，a，c，d）}; THREE.Matrix4 .makeOrtho =函数（a，b，c，d，f，e）{var g，h，m，l; g = new THREE.Matrix4; h = ba; m = cd; l = ef; g.n11 = 2 /小时; g.n12 = 0; g.n13 = 0; g.n14 =  - （（b + A）/小时）; g.n21 = 0; g.n22 = 2 /米; g.n23 = 0 ; g.n24 =  - （（C + d）/ M）; g.n31 = 0; g.n32 = 0; g.n33 = -2 /升; g.n34 =  - （（E + F）/升）; g.n41 = 0; g.n42 = 0; g.n43 = 0; g.n44 = 1; return g}; THREE.Matrix4 .__ v1 = new THREE.Vector3; THREE.Matrix4 .__ v2 = new THREE。 Vector3; THREE.Matrix4 .__ v3 = new THREE.Vector3; THREE.Matrix4 .__ m1 = new THREE.Matrix4; THREE.Matrix4 .__ m2 = new THREE.Matrix4; THREE.Object3D = function（）{this.name =“”; this.id = THREE.Object3DCount ++; this.parent = void 0; this.children = []; this.up = new THREE.Vector3（0,1,0）; this.position = new THREE.Vector3; this.rotation = new THREE.Vector3; this.eulerOrder =“XYZ”; this.scale = new THREE.Vector3（1,1,1）; this.flipSided = this.doubleSided = this。dynamic =！1; this.renderDepth = null; this.rotationAutoUpdate =！0; this.matrix = new THREE.Matrix4; this.matrixWorld = new THREE.Matrix4; this.matrixRotationWorld = new THREE.Matrix4; this.matrixWorldNeedsUpdate = this .matrixAutoUpdate =！0; this.quaternion = new THREE.Quaternion; this.useQuaternion =！1; this.boundRadius = 0; this.boundRadiusScale = 1; this.visible =！0; this.receiveShadow = this.castShadow =！ 1; this.frustumCulled =！0; this._vector = new THREE.Vector3}; THREE.Object3D.prototype = {constructor：THREE.Object3D，translate：function（a，b）{this.matrix.rotateAxis（b）; this.position.addSelf（b.multiplyScalar的（a））}，平移X：功能的（a）{this.translate（一个，this._vector.set（1,0,0））}，平移Y：功能的（a）{ this.translate（一个，this._vector.set（0,1,0））}，translateZ：功能的（a）{this.translate（一个，this._vector.set（0,0,1））}，的lookAt ：函数（）{this.matrix.lookAt（一，this.position，this.up）;此。rotationAutoUpdate && this.rotation.setRotationFromMatrix（this.matrix）}，add：function（a）{if（this.children.indexOf（a）===  -  1）{a.parent！== void 0 && a.parent.remove（a ）; a.parent = this; this.children.push（a）; for（var b = this; b.parent！== void 0;）b = b.parent; b！== void 0 && instanceof THREE.Scene && b .addObject（a）}}，remove：function（a）{var b = this.children.indexOf（a）; if（b！==  -  1）{a.parent = void 0; this.children.splice（ （b）1）; for（b = this; b.parent！== void 0;）b = b.parent; b！== void 0 && b instanceof THREE.Scene && b.removeObject（a）}}，getChildByName：function（a ，b）{var c，d，f; c = 0; for（d = this.children.length; c <d; c ++）{f = this.children [c]; if（f.name === a ）return f; if（b &&（f = f.getChildByName（a，b），f！== void 0））return f}}，updateMatrix：function（）{this.matrix.setPosition（this.position）; this .useQuaternion？this.matrix.setRotationFromQuaternion（这一点。四元数）：this.matrix.setRotationFromEuler（this.rotation，this.eulerOrder）;如果（this.scale.x == 1 || this.scale.y == 1个|| this.scale.z ==！ 1）this.matrix.scale（this.scale），this.boundRadiusScale = Math.max（this.scale.x，Math.max（this.scale.y，this.scale.z））; this.matrixWorldNeedsUpdate =！ 0}，updateMatrixWorld：函数（）{this.matrixAutoUpdate && this.updateMatrix（）;如果（this.matrixWorldNeedsUpdate || A）this.parent this.matrixWorld.multiply（this.parent.matrixWorld，this.matrix）：此？。 matrixWorld.copy（this.matrix），this.matrixWorldNeedsUpdate =！1，a =！0; for（var b = 0，c = this.children.length; b <c; b ++）this.children [b] .updateMatrixWorld （a）}}; THREE.Object3DCount = 0; THREE.Projector = function（）{function a（）{var a = g [e] = g [e] || new THREE.RenderableObject; e ++; return a} function b（）{var a = 1 [m] = l [m] || new THREE.RenderableVertex; m ++; return a}函数c（a，b）{return bz-az}函数d（a，b）{var c = 0，d = 1，e = a.z + aw，f = b.z + bw，g = -a.z + aw，h = -b.z + bw; return e> = 0 &&?F> = 0 &&克> = 0 && H> = 0？0：E！<0 &&?F<0 ||克<0 &&?<1：0：？！？（E <0 C = Math.max（C，E /（EF））： ?F<0 &&（d = Math.min（d，E /（EF））），克<0 C = Math.max（C，G /（GH））：H <0 &&（d = Math.min（d ，g /（gh））），d <c1！1：（a.lerpSelf（b，c），b.lerpSelf（a，1-d），！0））} var f，e，g = [ ]，H，M，L = []，J，I，N = []，O，p = []，K，S，K = []，C，Q，O = []，W = {对象： []，sprites：[]，lights：[]，elements：[]}，F = new THREE.Vector3，z = new THREE.Vector4，D = new THREE.Matrix4，u = new THREE.Matrix4，r = [ new THREE.Vector4，new THREE.Vector4，new THREE.Vector4，new THREE.Vector4，new THREE.Vector4，new THREE.Vector4]，E = new THREE.Vector4，N = new THREE.Vector4; this.computeFrustum = function的（a）{R [0] .SET（a.n41-a.n11，a.n42-a.n12，a.n43-a.n13，a.n44-a.n14）; R [1] .SET （a.n41 + a.n11，a.n42 + a.n12，a.n43 + a.n13，a.n44 +?? a.n14）; R [2] .SET（一个。N41 + a.n21，a.n42 + a.n22，a.n43 +
a.n23，a.n44 +?? a.n24）; R [3] .SET（a.n41-a.n21，a.n42-a.n22，a.n43-a.n23，a.n44-一个。 N24）; R [4] .SET（a.n41-a.n31，a.n42-a.n32，a.n43-a.n33，a.n44-a.n34）; R [5] .SET（ a.n41 + a.n31，a.n42 + a.n32，a.n43 + a.n33，a.n44 +?? a.n34）; for（a = 0; a <6; a ++）{var b = r [A]; b.divideScalar（Math.sqrt（BX * b.x +由* b.y + BZ * BZ））}}; this.projectVector =函数（A，b）{b.matrixWorldInverse.getInverse（二.matrixWorld）; D.multiply（b.projectionMatrix，b.matrixWorldInverse）; D.multiplyVector3（a）; return a}; this.unprojectVector = function（a，b）{b.projectionMatrixInverse.getInverse（b.projectionMatrix）; D.multiply（b.matrixWorld，b.projectionMatrixInverse）; D.multiplyVector3（a）; return a}; this.pickingRay = function（a，b）{var c; az = -1; c = new THREE.Vector3（ ax，ay，1）; this.unprojectVector（a，b）; this.unprojectVector（c，b）; c.subSelf（a）.normalize（）;返回新的THREE.Ray（a，c）}; this。 projectGraph =函数（b，d）{E = 0; w.objects.length = 0; w.sprites。length = 0; w.lights.length = 0; var g = function（b）{if（b.visible！==！1）{var c; if（c = b instanceof THREE.Mesh || b instanceof THREE。线）if（！（c = b.frustumCulled ===！1））a：{for（var d = b.matrixWorld，e = -b.geometry.boundingSphere.radius * Math.max（b.scale.x ，Math.max（b.scale.y，b.scale.z））中，h = 0; H <6; H ++）如果（C = R并[h] .X * d.n14 + R并[h] .Y * d.n24 + r [h] .z * d.n34 + r [h] .w，c <= e）{c =！1; break a} c =！0} c？（D.multiplyVector3（F .copy（b.position）），f = a（），f.object = b，fz = Fz，w.objects.push（f））：b instanceof THREE.Sprite || b instanceof THREE.Particle？（D .multiplyVector3（F.copy（b.position）），f = a（），f.object = b，fz = Fz，w.sprites.push（f））：b instanceof THREE.Light && w.lights.push（b ）; c = 0; for（d = b.children.length; c <d; c ++）g（b.children [c]）}}; g（b）; d && w.objects.sort（c）; return w }; this.projectScene = function（a，e，f）{var g = e.near，r = e.far，F，L，B，S，v，R，P，V，J，t，A， X，Y，M，LA，发; Q = S = O = I = 0; w.elements.length = 0;即parent === void 0 &&（console.warn（“DEPRECATED：Camera has been added to a Scene。Add it ...”），a.add（e））; a.updateMatrixWorld（）; e.matrixWorldInverse。 getInverse（e.matrixWorld）; D.multiply（e.projectionMatrix，e.matrixWorldInverse）; this.computeFrustum（d）; W = this.projectGraph（A，1！）; A = 0;对于（F = w.objects如果（J = w.objects [a] .object，t = J.matrixWorld，x = J.material，m = 0，J实例的THREE.Mesh）{A = J.geometry ; Y = J.geometry.materials; S = A.vertices; M = A.faces; LA = A.faceVertexUvs; A = J.matrixRotationWorld.extractRotation（T）; L = 0;对于（B = S.length; →<乙，L ++）H = b（），h.positionWorld.copy（S [L] .POSITION），t.multiplyVector3（h.positionWorld），h.positionScreen.copy（h.positionWorld），D.multiplyVector4（ h.positionScreen），h.positionScreen.x / = h.positionScreen.w，h.positionScreen.y / = h.positionScreen.w，h.visible = h.positionScreen.z>克&& h.positionScreen。（b = M [S]; if（B instanceof THREE.Face3）if（v = 1 [Ba]，R = 1 [BB]，P = 1 [BC]，v.visible && R.visible && P.visible &&（J.doubleSided || J.flipSided！=（P.positionScreen.xv.positionScreen.x）*（R.positionScreen.yv.positionScreen。 y） - （P.positionScreen.yv.positionScreen.y）*（R.positionScreen.xv.positionScreen.x）<0））V = n [i] = n [i] || new THREE.RenderableFace3，i ++， j = V，j.v1.copy（v），j.v2.copy（R），j.v3.copy（P）; else continue; else if（B instanceof THREE.Face4）if（v = 1 [Ba ]中，R = 1 [BB]，P = 1 [BC]，V = 1 [BD]，v.visible && R.visible && P.visible && V.visible &&（J.doubleSided || J.flipSided！=（（V.positionScreen.xv .positionScreen.x）*（R.positionScreen.yv.positionScreen.y） - （V.positionScreen.yv.positionScreen.y）*（R.positionScreen.xv.positionScreen.x）<0 ||（R.positionScreen。 xP.positionScreen.x）*（V.positionScreen。yP.positionScreen.y） - （R.positionScreen.yP.positionScreen.y）*（V.positionScreen.xP.positionScreen.x）<0）））fa = p [o] = p [o] || new THREE .RenderableFace4，o ++，j = fa，j.v1.copy（v），j.v2.copy（R），j.v3.copy（P），j.v4.copy（V）; else continue; j。 normalWorld.copy（B.normal）; A.multiplyVector3（j.normalWorld）; j.centroidWorld.copy（B.centroid）; t.multiplyVector3（j.centroidWorld）; j.centroidScreen.copy（j.centroidWorld）; d .multiplyVector3（j.centroidScreen）; P = B.vertexNormals; V = 0;对于（R = P.length; v <R; v ++）V = j.vertexNormalsWorld [V]，V.copy（P [V]） ，A.multiplyVector3（V）; V = 0;对于（R = la.length; v <R; v ++）如果（FA = LA [V] [S]）{P = 0;对于（V = fa.length ; P <v; p ++）j.uvs [v] [P] = FA [P]} j.material = X; j.faceMaterial = B.materialIndex == NULL Y [B.materialIndex]：！空; JZ = j.centroidScreen.z; w.elements.push（j）}}否则如果（J instanceof（v），j.v2.copy（v），j.v1.copy（v），j.v2.copy（R） ，j.v3.copy（P），j.v4.copy（V）; else continue; j.normalWorld.copy（B.normal）; A.multiplyVector3（j.normalWorld）; j.centroidWorld.copy（B。重心）; t.multiplyVector3（j.centroidWorld）; j.centroidScreen.copy（j.centroidWorld）; D.multiplyVector3（j.centroidScreen）; P = B.vertexNormals; v = 0;对于（R = P.length; v <R; v ++）v = j.vertexNormalsWorld [v]，V.copy（P [v]），A.multiplyVector3（v）; v = 0;对于（R = la.length; v <R; v ++）如果（FA = LA [V] [S]）{P = 0;对于（V = fa.length; P <V; p ++）j.uvs [V] [P] = FA [P]} j.material = x; j.faceMaterial = B.materialIndex！== null？y [B.materialIndex]：null; jz = j.centroidScreen.z; w.elements.push（j）}} else if（J instanceof（v），j.v2.copy（v），j.v1.copy（v），j.v2.copy（R） ，j.v3.copy（P），j.v4.copy（V）; else continue; j.normalWorld.copy（B.normal）; A.multiplyVector3（j.normalWorld）; j.centroidWorld.copy（B。重心）; t.multiplyVector3（j.centroidWorld）; j.centroidScreen.copy（j.centroidWorld）; D.multiplyVector3（j.centroidScreen）; P = B.vertexNormals; v = 0;对于（R = P.length; v <R; v ++）v = j.vertexNormalsWorld [v]，V.copy（P [v]），A.multiplyVector3（v）; v = 0;对于（R = la.length; v <R; v ++）如果（FA = LA [V] [S]）{P = 0;对于（V = fa.length; P <V; p ++）j.uvs [V] [P] = FA [P]} j.material = x; j.faceMaterial = B.materialIndex！== null？y [B.materialIndex]：null; jz = j.centroidScreen.z; w.elements.push（j）}} else if（J instanceofmultiplyVector3（j.normalWorld）; j.centroidWorld.copy（B.centroid）; t.multiplyVector3（j.centroidWorld）; j.centroidScreen.copy（j.centroidWorld）; D.multiplyVector3（j.centroidScreen）; P =乙.vertexNormals; v = 0;对于（R = P.length; v <R; v ++）v = j.vertexNormalsWorld [v]，V.copy（P [v]），A.multiplyVector3（v）; v = 0 ;对于（R = la.length; v <R; v ++）如果（FA = LA [V] [S]）{P = 0;对于（V = fa.length; P <V; p ++）j.uvs [ v] [P] = FA [P]} j.material = X; j.faceMaterial = B.materialIndex == NULL Y [B.materialIndex]：！NULL; JZ = j.centroidScreen.z; w.elements。 push（j）}} else if（J instanceofmultiplyVector3（j.normalWorld）; j.centroidWorld.copy（B.centroid）; t.multiplyVector3（j.centroidWorld）; j.centroidScreen.copy（j.centroidWorld）; D.multiplyVector3（j.centroidScreen）; P =乙.vertexNormals; v = 0;对于（R = P.length; v <R; v ++）v = j.vertexNormalsWorld [v]，V.copy（P [v]），A.multiplyVector3（v）; v = 0 ;对于（R = la.length; v <R; v ++）如果（FA = LA [V] [S]）{P = 0;对于（V = fa.length; P <V; p ++）j.uvs [ v] [P] = FA [P]} j.material = X; j.faceMaterial = B.materialIndex == NULL Y [B.materialIndex]：！NULL; JZ = j.centroidScreen.z; w.elements。 push（j）}} else if（J instanceofV; p ++）j.uvs [V] [P] = FA [P]} j.material = X; j.faceMaterial = B.materialIndex == NULL Y [B.materialIndex]：！NULL; JZ = j的。 centroidScreen.z; w.elements.push（j）}}否则如果（J instanceofV; p ++）j.uvs [V] [P] = FA [P]} j.material = X; j.faceMaterial = B.materialIndex == NULL Y [B.materialIndex]：！NULL; JZ = j的。 centroidScreen.z; w.elements.push（j）}}否则如果（J instanceof
THREE.Line）{u.multiply（d，T）; S = J.geometry.vertices; V = B（）; v.positionScreen.copy（S [0] .POSITION）; u.multiplyVector4（v.positionScreen）为：L = 1;对于（b = S.length，L <b，L ++）如果（v = b（），v.positionScreen.copy（S [L] .POSITION），u.multiplyVector4（v.positionScreen）， R = L [M-2]，E.copy（v.positionScreen），N.copy（R.positionScreen），d（E，N））E.multiplyScalar（1 / EW），N.multiplyScalar（1 / NW ），K = s [k] = K [ Math.max（EZ，NZ），k.material = X，w.elements.push（K）} A = 0;对于（F = w.sprites.length;一个<F;一++）如果（J =瓦特（z.set（t.n14，t.n24，t.n34,1），D.multiplyVector4（z），zz / = zw， zz> 0 && z.z <1））g = O [Q] = O [Q] || new THREE.RenderableParticle，Q ++，C = g，Cx = zx / zw，Cy = zy / zw，Cz = zz，C .rotation = J.rotation.z，C.scale.x = J.scale.x * Math.abs（CX-（z.x + E。projectionMatrix.n11）/（z.w + e.projectionMatrix.n14）），C.scale.y = J.scale.y * Math.abs（CY-（z.y + e.projectionMatrix.n22）/（Z .w + e.projectionMatrix.n24）），C.material = J.material，w.elements.push（C）; f && w.elements.sort（c）; return w}}; THREE.Quaternion = function（a， b，c，d）{this.set（a || 0，b || 0，c || 0，d！== void 0？d：1）}; THREE.Quaternion.prototype = {constructor：THREE。四元数集：函数（a，b，c，d）{this.x = a; this.y = b; this.z = c; this.w = d; return this}，copy：function（a）{ this.x = ax; this.y = ay; this.z = az; this.w = aw; return this}，setFromEuler：function（a）{var b = Math.PI / 360，c = ax * b， d = AY * b，F = AZ * b，A = Math.cos（d），d = Math.sin（d）中，b = Math.cos（-f）中，f = Math.sin（-F）， E = Math.cos（c）中，C = Math.sin（c）中，G = A * b，H = d * F; this.w = G * EH * C; this.x = G * C + H * e; this.y = d * b * e + a * f * c; this.z = a * f * ed * b * c; return this}，setFromAxisAngle：function（a，b）{var c = b / 2，d = Math.sin（C）; this.x =斧* d; this.y = AY * d; this.z = AZ * d; this.w =数学。cos（c）; return this}，setFromRotationMatrix：function（a）{var b = Math.pow（a.determinant（），1/3）; this.w = Math.sqrt（Math.max（0，b + a.n11 + a.n22 + a.n33））/ 2; this.x = Math.sqrt（Math.max（0，b + a.n11-a.n22-a.n33））/ 2;这一点。 Y = Math.sqrt（Math.max（0，+ ba.n11 a.n22-a.n33））/ 2; this.z = Math.sqrt（Math.max（0，ba.n11-a.n22 + a.n33））/ 2; this.x = a.n32-a.n23 <0 -Math.abs（this.x）：Math.abs（this.x）; this.y = a.n13-一个？.n31 <0 -Math.abs（this.y）：Math.abs（this.y）; this.z = a.n21-a.n12 <0 -Math.abs（this.z）：数学？。 abs（this.z）; this.normalize（）; return this}，calculateW：function（）{this.w = -Math.sqrt（Math.abs（1-this.x * this.x-this.y * this.y-this.z * this.z））; return this}，inverse：function（）{this.x * =  -  1; this.y * =  -  1; this.z * =  -  1; return this }，length：function（）{return Math.sqrt（this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w）}，normalize：function （）{var a = Math.sqrt（this.x * this.x + this.y * this.y + this.z * this.z + this。W * this.w）;一个=== 0 this.w = this.z = this.y = this.x = 0：（A = 1 / A，this.x * = A，this.y * =？ a，this.z * = a，this.w * = a）; return this}，multiplySelf：function（a）{var b = this.x，c = this.y，d = this.z，f = this .W，E = AX，G = AY，H = AZ，A = AW; this.x = b * A + F * E + C * HD *克; this.y = C * A + F * G + d * eb * h; this.z = d * a + f * h + b * gc * e; this.w = f * ab * ec * gd * h; return this}，multiply：function（a，b）{ this.x =斧* b.w + AY * BZ-AZ * b.y + AW * BX; this.y = -ax * b.z + AY * b.w + AZ * b.x + AW *由; this.z = ax * by-ay * b.x + az * b.w + aw * bz; this.w = -ax * bx-ay * by-az * b.z + aw * bw; return this }，multiplyVector3：function（a，b）{b ||（b = a）; var c = ax，d = ay，f = az，e = this.x，g = this.y，h = this.z中，m = this.w，L = M * C + G * FH * d，J = M * d + H * CE * F，I = M * F + E * DG * C，C = -e * CG * DH * F; BX = L * M + C * -e + J * * -hi -g;可以通过= j的* M + C * -g + I * * -EL -H; BZ = I * M + C * （a，b，c，d）{var f = aw * b.w + ax * b.x + ay * b.y + AZ * BZ;?F<0（CW = -bw，CX = -bx，CY = -by，CZ = -BZ中，f = -f）：C？。copy（b）; if（Math.abs（f）> = 1）返回cw = aw，cx = ax，cy = ay，cz = az，c; var e = Math.acos（f），f = Math。 sqrt（1-f * f）; if（Math.abs（f）<0.001）返回cw = 0.5 *（a.w + bw），cx = 0.5 *（a.x + bx），cy = 0.5 *（ a.y +通过），CZ = 0.5 *（+ a.z BZ），C; b = Math.sin（（1-d）* E）/f;d=Math.sin（d * E）/ F ; cw = aw * b + cw * d; cx = ax * b + cx * d; cy = ay * b + cy * d; cz = az * b + cz * d; return c}; THREE.Vertex = function （a）{this.position = a || new THREE.Vector3}; THREE.Face3 = function（a，b，c，d，f，e）{this.a = a; this.b = b; this。 c = c; this.normal = d instanceof THREE.Vector3？d：new THREE.Vector3; this.vertexNormals = d instanceof Array？d：[]; this.color = f instanceof THREE.Color？f：new THREE.Color ; this.vertexColors = f instanceof Array？f：[]; this.vertexTangents = []; this.materialIndex = e; this.centroid = new THREE.Vector3}; THREE.Face4 = function（a，b，c，d ，f，e，g）{this.a = a; this.b = b; this.c = c; this.d = d; this.normal = f instanceof THREE.Vector3？f：new THREE.Vector3; this 。vertexNormals = f instanceof Array？f：[]; this.color = e instanceof THREE.Color？e：new THREE.Color; this.vertexColors = e instanceof Array？e：[]; this.vertexTangents = []; this。 materialIndex = g; this.centroid = new THREE.Vector3}; THREE.UV = function（a，b）{this.u = a || 0; this.v = b || 0}; THREE.UV.prototype = {构造函数：THREE.UV，set：function（a，b）{this.u = a; this.v = b; return this}，copy：function（a）{this.u = au; this.v = av ; return this}，clone：function（）{return new THREE.UV（this.u，this.v）}}; THREE.Geometry = function（）{this.id = THREE.GeometryCount ++; this.vertices = [] ; this.colors = []; this.materials = []; this.faces = []; this.faceUvs = [[]]; this.faceVertexUvs = [[]]; this.morphTargets = []; this.morphColors = []; this.skinWeights = []; this.skinIndices = []; this.boundingSphere = this.boundingBox = NULL; this.dynamic = this.hasTangents = 1}; THREE.Geometry.prototype = {构造：THREE .Geometry，applyMatrix：函数（a）{var b = new THREE.Matrix4; b.extractRotation（a，new THREE.Vector3（1,1,1））; for（var c = 0，d = this.vertices.length; c <d ; c ++）a.multiplyVector3（this.vertices [c] .position）; c = 0; for（d = this.faces.length; c <d; c ++）{var f = this.faces [c]; b。 multiplyVector3（f.normal）; for（var e = 0，g = f.vertexNormals.length; e <g; e ++）b.multiplyVector3（f.vertexNormals [e]）; a.multiplyVector3（f.centroid）}} ，computeCentroids：function（）{var a，b，c; a = 0; for（b = this.faces.length; a <b; a ++）c = this.faces [a]，c.centroid.set（0 ，0），c.centroid.addSelf（this.vertices [ca] .position），c.centroid.addSelf（this.vertices [cb] .position），c.centroid.addSelf （this.vertices [cc] .position），c.centroid.divideScalar（3））：c instanceof THREE.Face4 &&（c.centroid.addSelf（this.vertices [ca] .position），c.centroid.addSelf（this .vertices [CB] .POSITION），c.centroid.addSelf（this.vertices并[c。c）.position），c.centroid.addSelf（this.vertices [cd] .position），c.centroid.divideScalar（4））}，computeFaceNormals：function（）{var a，b，c，d，f， e，g = new THREE.Vector3，h = new THREE.Vector3; a = 0; for（b = this.faces.length; a <b; a ++）c = this.faces [a]，d = this.vertices [CA]，F = this.vertices [CB]，E = this.vertices [CC]，g.sub（e.position，f.position），h.sub（d.position，f.position），克。 crossSelf（h），g.isZero（）|| g.normalize（），c.normal.copy（g）}，computeVertexNormals：function（）{var a，b，c，d; if（this .__ tmpVertices == =（this.vertices.length）; a = 0; for（b = this.vertices.length; a <b; a ++）d [a] = new THREE.Vector3; a = 0; for（b = this.faces.length; a <b; a ++）if（c = this.faces [a]，c instanceof THREE.Face3）c.vertexNormals = [new THREE.Vector3，new THREE。 Vector3，new THREE.Vector3]; else if（c instanceof THREE.Face4）c.vertexNormals = [new THREE.Vector3，new THREE.Vector3，new THREE.Vector3，新的THREE.Vector3]} else {d = this .__ tmpVertices; a = 0; for（b = this.vertices.length; a <b; a ++）d [a] .set（0,0,0）} a = 0; for（b = this.faces.length; a <b; a ++）c = this.faces [a]，c instanceof THREE.Face3？（d [ca] .addSelf（c.normal），d [cb] .addSelf（c.normal），d [cc] .addSelf（c.normal））：c instanceof THREE.Face4 &&（d [ca] .addSelf（c.normal），d [cb] .addSelf（c.normal） ，d [CC] .addSelf（c.normal），d [CD] .addSelf（c.normal））; A = 0;对于（b = this.vertices.length; A <b;一++）d [α] .normalize（）; a = 0; for（b = this.faces.length; a <b; a ++）c = this.faces [a]，c instanceof THREE.Face3？（c.vertexNormals [0] .copy（ d [ca]），c.vertexNormals [1] .copy（d [cb]），c.vertexNormals [2] .copy（d [cc]））：c instanceof THREE.Face4 &&（c.vertexNormals [0]。拷贝（d [CA]），c.vertexNormals [1] .copy（d [CB]），c.vertexNormals [2] .copy（d [CC]），c.vertexNormals [3] .copy（d [CD ]）}，computeTangents：function（）{function a（a，b，c，d，e，f，D）{h = a。顶点并[b] .POSITION; M = a.vertices并[c] .POSITION; L = a.vertices [d] .POSITION; J = G [E]; I = G [F]; N = G [d]; O = MX-HX; p = LX-HX; K =我的-HY; S = LY-HY; K = MZ-赫兹; C = LZ-赫兹; Q = IU菊; O = NU菊; W = IV-JV; F = NV-JV; Z = 1 /（Q * FO * W）; E.set（（F * *流p）* Z，（F *千瓦*秒）* Z，（F *千瓦* C）* Z）; N.set（（Q * PO *○）* Z，（Q * SO * K）* Z，（Q * CO * K）* Z）; U [b] .addSelf（E ）; U [C] .addSelf（E）; U [d] .addSelf（E）; R并[b] .addSelf（N）; R [C] .addSelf（N）; R [d] .addSelf（N ）} var b，c，d，f，e，g，h，m，l，j，i，n，o，p，k，s，K，C，Q，O，w，F，z，D ，u = []，r = []，E = new THREE.Vector3，N = new THREE.Vector3，W = new THREE.Vector3，da = new THREE.Vector3，G = new THREE.Vector3; b = 0; for（c = this.vertices.length; b <c; b ++）u [b] = new THREE.Vector3，r [b] = new THREE.Vector3; b = 0; for（c = this.faces.length; b <c; b ++）e = this.faces [b]，g = this.faceVertexUvs [0] [b]，例如THREE.Face3？a（this，ea，eb，ec，0,1,2）：例如THREE.FACE4 &&（a（this，ea，eb，ec，0,1,2），a（this，ea，eb，ed，0,1,3））;var H = [“a”，“b”，“c”，“d”]; b = 0; for（c = this.faces.length; b <c; b ++）{e = this.faces [b] ;对于（d = 0; d <e.vertexNormals.length; d ++）G.copy（e.vertexNormals [d]）中，f = E [H并[d]，d = U [F]，W.copy（ d），W.subSelf（G.multiplyScalar（G.dot（d）））。正常化（），da.cross（e.vertexNormals并[d]，d），F = da.dot（R [F]）， f = f <0？-1：1，e.vertexTangents [d] = new THREE.Vector4（Wx，Wy，Wz，f）} this.hasTangents =！0}，computeBoundingBox：function（）{var a; if （this.vertices.length> 0）{this.boundingBox = {X：[this.vertices [0] .position.x，this.vertices [0] .position.x]，Y：[this.vertices [0] 。:. this.vertices [0] .position.y]，z：[this.vertices [0] .position.z，this.vertices [0] .position.z]}; for（var b = 1中，c = this.vertices.length，b <C; b ++）{A = this.vertices并[b];若（a.position.x <this.boundingBox.x [0]）this.boundingBox.x [0] = a.position.x; else if（a.position.x> this.boundingBox.x [1]）this。boundingBox.x [1] = a.position.x; if（a.position.y <this.boundingBox.y [0]）this.boundingBox.y [0] = a.position.y; else if（a。 position.y> this.boundingBox.y [1]）this.boundingBox.y [1] = a.position.y;若（a.position.z <this.boundingBox.z [0]）this.boundingBox.z [0] = a.position.z; else if（a.position.z> this.boundingBox.z [1]）this.boundingBox.z [1] = a.position.z}}}，computeBoundingSphere：function ）{for（var a = 0，b = 0，c = this.vertices.length; b <c; b ++）a = Math.max（a，this.vertices [b] .position.length（））; this .boundingSphere = {radius：a}}，mergeVertices：function（）{var a = {}，b = []，c = []，d，f = Math.pow（10,4），e，g; e = 0;对于（G = this.vertices.length，E <克; e ++）d = this.vertices并[e] .POSITION，d = [Math.round（DX * f）中，Math.round（DY * F） ，Math.round（dz * f）]。join（“_”），a [d] === void 0？（a [d] = e，b.push（this.vertices [e]），c [ E] = b.length个-1）：C [E] = C [一个并[d]]; E = 0;对于（G = this.faces.length，E <克; e ++）如果（A =此。face [e]，一个three.face3的实例aa = c [aa]，ab = c [ab]，ac = c [ac];否则if（THREE.Face4的一个实例）aa = c [aa]，ab = c [ab]，ac = c [ac]，ad = c [ad]; this.vertices = b}}; THREE.GeometryCount = 0; THREE.Camera = function（）{if（arguments.length）return console。 warn（“DEPRECATED：Camera（）现在是PerspectiveCamera（）或OrthographicCamera（）。”），new THREE.PerspectiveCamera（arguments [0]，arguments [1]，arguments [2]，arguments [3]）; THREE.Object3D .call（this）; this.matrixWorldInverse = new THREE.Matrix4; this.projectionMatrix = new THREE.Matrix4; this.projectionMatrixInverse = new THREE.Matrix4}; THREE.Camera.prototype = new THREE.Object3D; THREE.Camera.prototype .constructor = THREE.Camera; THREE.Camera.prototype.lookAt =函数（）{this.matrix.lookAt（this.position，一，this.up）; this.rotationAutoUpdate && this.rotation.setRotationFromMatrix（this.matrix）} ;三。OrthographicCamera =函数（A，B，C，d，F，E）{THREE.Camera.call（本）; this.left =一个; this.right = B; this.top = C; this.bottom = d; this.near = f！== void 0？f：0.1; this.far = e！== void 0？e：2E3; this.updateProjectionMatrix（）}; THREE.OrthographicCamera.prototype = new THREE.Camera; THREE。 OrthographicCamera.prototype.constructor = THREE.OrthographicCamera; THREE.OrthographicCamera.prototype.updateProjectionMatrix =函数（）{this.projectionMatrix = THREE.Matrix4.makeOrtho（this.left，this.right，this.top，this.bottom，此。 （），this.far）}; THREE.PerspectiveCamera = function（a，b，c，d）{THREE.Camera.call（this）; this.fov = a！== void 0？a：50; this.aspect = b！== void 0？b：1; this.near = c！== void 0？c：0.1; this.far = d！== void 0？d：2E3; this.updateProjectionMatrix（）}; THREE .PerspectiveCamera.prototype = new THREE.Camera; THREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera; THREE.PerspectiveCamera.prototype。setLens = function（a，b）{this.fov = 2 * Math.atan（（b！== void 0？b：43.25）/（a * 2））; this.fov * = 180 / Math.PI; this.updateProjectionMatrix（）}; THREE.PerspectiveCamera.prototype.setViewOffset =函数（A，b，C，d，F，E）{this.fullWidth =一个; this.fullHeight = b; this.x = C;此。 y = d; this.width = f; this.height = e; this.updateProjectionMatrix（）}; THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function（）{if（this.fullWidth）{var a = this.fullWidth / this .fullHeight，b = Math.tan（this.fov * Math.PI / 360）* this.near，C = -b，d = A * C，A = Math.abs（A * BD）中，c =数学。 ABS（BC）; this.projectionMatrix = THREE.Matrix4.makeFrustum（d + this.x * A / this.fullWidth，d +（this.x + this.width）* A / this.fullWidth，B-（this.y + this.height）* c / this.fullHeight，b-this.y * c / this.fullHeight，this.near，this.far）} else this.projectionMatrix = THREE.Matrix4.makePerspective（this.fov，this。方面，this.near，this.far）}; THREE.Light =函数（）{THREE.Object3D。call（this）; this.color = new THREE.Color（a）}; THREE.Light.prototype = new THREE.Object3D; THREE.Light.prototype.constructor = THREE.Light; THREE.Light.prototype.supr = THREE .Object3D.prototype; THREE.AmbientLight = function（a）{THREE.Light.call（this，a）}; THREE.AmbientLight.prototype = new THREE.Light; THREE.AmbientLight.prototype.constructor = THREE.AmbientLight; THREE .DirectionalLight = function（a，b，c）{THREE.Light.call（this，a）; this.position = new THREE.Vector3（0,1,0）; this.intensity = b！== void 0？ b：1; this.distance = c！== void 0？c：0}; THREE.DirectionalLight.prototype = new THREE.Light; THREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight; THREE.PointLight = function（a ，b，c）{THREE.Light.call（this，a）; this.position = new THREE.Vector3（0,0,0）; this.intensity = b！== void 0？b：1; this。 distance = c！== void 0？c：0}; THREE.PointLight.prototype = new THREE.Light; THREE.PointLight.prototype。构造函数= THREE.PointLight; THREE.Material = function（a）{this.name =“”; this.id = THREE.MaterialCount ++; a = a || {}; this.opacity = a.opacity！== void 0 ？a.opacity：1; this.transparent = a.transparent！== void 0？a.transparent：！1; this.blending = a.blending！== void 0？a.blending：THREE.NormalBlending; this。 depthTest = a.depthTest！== void 0？a.depthTest：！0; this.depthWrite = a.depthWrite！== void 0？a.depthWrite：！0; this.polygonOffset = a.polygonOffset！== void 0 ？a.polygonOffset：！1; this.polygonOffsetFactor = a.polygonOffsetFactor！== void 0？a.polygonOffsetFactor：0; this.polygonOffsetUnits = a.polygonOffsetUnits！== void 0？a.polygonOffsetUnits：0; this.alphaTest = a.alphaTest！== void 0？a.alphaTest：0; this.overdraw = a.overdraw！== void 0？a.overdraw：！1}; THREE.MaterialCount = 0; THREE.NoShading = 0; THREE。 FlatShading = 1; THREE.SmoothShading = 2; THREE.NoColors = 0; THREE.FaceColors = 1; THREE.VertexColors = 2;三。NormalBlending = 0; THREE.AdditiveBlending = 1; THREE.SubtractiveBlending = 2; THREE.MultiplyBlending = 3; THREE.AdditiveAlphaBlending = 4; THREE.LineBasicMaterial =函数（）{THREE.Material.call（这一点，一个）;一个=一个|| {}; this.color = a.color！== void 0？new THREE.Color（a.color）：new THREE.Color（16777215）; this.linewidth = a.linewidth！== void 0？ a.linewidth = 1; this.linecap = a.linecap！== void 0？a.linecap：“round”; this.linejoin = a.linejoin！== void 0？a.linejoin：“round”; this。 vertexColors = a.vertexColors？a.vertexColors：！1; this.fog = a.fog！== void 0？a.fog：！0}; THREE.LineBasicMaterial.prototype = new THREE.Material; THREE.LineBasicMaterial.prototype .constructor = THREE.LineBasicMaterial; THREE.MeshBasicMaterial = function（a）{THREE.Material.call（this，a）; a = a || {}; this.color = a.color！== void 0？new THREE .Color（a.color）：new THREE.Color（16777215）; this.map = a.map！== void 0？a.map：null; this.lightMap = a。lightMap！== void 0？a.lightMap：null; this.envMap = a.envMap！== void 0？a.envMap：null; this.combine = a.combine！== void 0？a.combine：THREE .MultiplyOperation; this.reflectivity = a.reflectivity！== void 0？a.reflectivity：1; this.refractionRatio = a.refractionRatio！== void 0？a.refractionRatio：0.98; this.fog = a.fog！= = void 0？a.fog：！0; this.shading = a.shading！== void 0？a.shading：THREE.SmoothShading; this.wireframe = a.wireframe！== void 0？a.wireframe :! 1; this.wireframeLinewidth = a.wireframeLinewidth！== void 0？a.wireframeLinewidth：1; this.wireframeLinecap = a.wireframeLinecap！== void 0？a.wireframeLinecap：“round”; this.wireframeLinejoin = a.wireframeLinejoin！ == void 0？a.wireframeLinejoin：“round”; this.vertexColors = a.vertexColors！== void 0？a.vertexColors：！1; this.skinning = a.skinning！== void 0？a.skinning： ！1; this.morphTargets = a.morphTargets！== void 0？a.morphTargets：！1}; THREE。MeshBasicMaterial.prototype = new THREE.Material; THREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial; THREE.MeshLambertMaterial = function（a）{THREE.Material.call（this，a）; a = a || {}; this .color = a.color！== void 0？new THREE.Color（a.color）：new THREE.Color（16777215）; this.ambient = a.ambient！== void 0？new THREE.Color（a。环境）：new THREE.Color（328965）; this.map = a.map！== void 0？a.map：null; this.lightMap = a.lightMap！== void 0？a.lightMap：null; this .envMap = a.envMap！== void 0？a.envMap：null; this.combine = a.combine！== void 0？a.combine：THREE.MultiplyOperation; this.reflectivity = a.reflectivity！== void 0？a.reflectivity：1; this.refractionRatio = a.refractionRatio！== void 0？a.refractionRatio：0.98; this.fog = a.fog！== void 0？a.fog：！0; this.shading = a.shading！== void 0？a.shading：THREE.SmoothShading; this.wireframe = a.wireframe！== void 0？a.wireframe：！1; this.wireframeLinewidth = a。wireframeLinewidth！== void 0？a.wireframeLinewidth：1; this.wireframeLinecap = a.wireframeLinecap！== void 0？a.wireframeLinecap：“round”; this.wireframeLinejoin = a.wireframeLinejoin！== void 0？a.wireframeLinejoin ：“round”; this.vertexColors = a.vertexColors！== void 0？a.vertexColors：！1; this.skinning = a.skinning！== void 0？a.skinning：！1; this.morphTargets = a .morphTargets！== void 0？a.morphTargets：！1}; THREE.MeshLambertMaterial.prototype = new THREE.Material; THREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial; THREE.MeshPhongMaterial = function（a）{THREE。 Material.call（this，a）; a = a || {}; this.color = a.color！== void 0？new THREE.Color（a.color）：new THREE.Color（16777215）; this。 （THREE.Color（328965）; this.specular = a.specular！== void 0？new THREE.Color（a.ambient） ）：new THREE.Color（1118481）;这个。shininess = a.shininess！== void 0？a.shininess：30; this.metal = a.metal！== void 0？a.metal：！1; this.perPixel = a.perPixel！== void 0？ a.perPixel：！1; this.map = a.map！== void 0？a.map：null; this.lightMap = a.lightMap！== void 0？a.lightMap：null; this.envMap = a .envMap！== void 0？a.envMap：null; this.combine = a.combine！== void 0？a.combine：THREE.MultiplyOperation; this.reflectivity = a.reflectivity！== void 0？a。反射率：1; this.refractionRatio = a.refractionRatio！== void 0？a.refractionRatio：0.98; this.fog = a.fog！== void 0？a.fog：！0; this.shading = a.shading ！== void 0？a.shading：THREE.SmoothShading; this.wireframe = a.wireframe！== void 0？a.wireframe：！1; this.wireframeLinewidth = a.wireframeLinewidth！== void 0？a.wireframeLinewidth ：1; this.wireframeLinecap = a.wireframeLinecap！== void 0？a.wireframeLinecap：“round”; this.wireframeLinejoin = a.wireframeLinejoin！== void 0？a.wireframeLinejoin：“round”;this.vertexColors = a.vertexColors！== void 0？a.vertexColors：！1; this.skinning = a.skinning！== void 0？a.skinning：！1; this.morphTargets = a.morphTargets！== void THREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial; THREE.MeshDepthMaterial = function（a）{THREE.Material.call（this ，a）; a = a || {}; this.shading = a.shading！== void 0？a.shading：THREE.SmoothShading; this.wireframe = a.wireframe！== void 0？a.wireframe： ！1; this.wireframeLinewidth = a.wireframeLinewidth！== void 0？a.wireframeLinewidth：1}; THREE.MeshDepthMaterial.prototype = new THREE.Material; THREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial; THREE.MeshNormalMaterial =函数（）{THREE.Material.call（这一点，一个）; A = A || {}; this.shading = a.shading a.shading：THREE.FlatShading; this.wireframe = a.wireframe一个？。线框：1;这一点。wireframeLinewidth = a.wireframeLinewidth？a.wireframeLinewidth：1}; THREE.MeshNormalMaterial.prototype = new THREE.Material; THREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial; THREE.MeshFaceMaterial = function（）{}; THREE.ParticleBasicMaterial =函数（a）{THREE.Material.call（this，a）; a = a || {}; this.color = a.color！== void 0？new THREE.Color（a.color）：new THREE。 Color（16777215）; this.map = a.map！== void 0？a.map：null; this.size = a.size！== void 0？a.size：1; this.sizeAttenuation = a.sizeAttenuation ！== void 0？a.sizeAttenuation：！0; this.vertexColors = a.vertexColors！== void 0？a.vertexColors：！1; this.fog = a.fog！== void 0？a.fog： ！0}; THREE.ParticleBasicMaterial.prototype = new THREE.Material; THREE.ParticleBasicMaterial.prototype.constructor = THREE.ParticleBasicMaterial; THREE.ParticleCanvasMaterial = function（a）{THREE.Material.call（this，a）; a = a || {}; this.color = a.color！== void 0？new THREE.Color（a.color）：new THREE.Color（16777215）; this.program = a.program！== void 0？a.program：function（）{}}; THREE.ParticleCanvasMaterial .prototype = new THREE.Material; THREE.ParticleCanvasMaterial.prototype.constructor = THREE.ParticleCanvasMaterial; THREE.Texture = function（a，b，c，d，f，e）{this.id = THREE.TextureCount ++; this.image = a; this.mapping = b！== void 0？b：new THREE.UVMapping; this.wrapS = c！== void 0？c：THREE.ClampToEdgeWrapping; this.wrapT = d！== void 0？d ：THREE.ClampToEdgeWrapping; this.magFilter = f！== void 0？f：THREE.LinearFilter; this.minFilter = e！== void 0？e：THREE.LinearMipMapLinearFilter; this.offset = new THREE.Vector2（0， 0）; this.repeat = new THREE.Vector2（1,1）; this.needsUpdate =！1; this.onUpdate = null}; THREE.Texture.prototype = {构造函数：THREE.Texture，clone：function（）{ var a = new THREE.Texture（this.image，this.mapping，this.wrapS，this.wrapT，this.magFilter，this。minFilter）; a.offset.copy（this.offset）; a.repeat.copy（this.repeat）; return a}}; THREE.TextureCount = 0; THREE.MultiplyOperation = 0; THREE.MixOperation = 1; THREE。 CubeReflectionMapping =函数（）{}; THREE.CubeRefractionMapping =函数（）{}; THREE.LatitudeReflectionMapping =函数（）{}; THREE.LatitudeRefractionMapping =函数（）{}; THREE.SphericalReflectionMapping =函数（）{};三。 SphericalRefractionMapping =函数（）{}; THREE.UVMapping =函数（）{}; THREE.RepeatWrapping = 0; THREE.ClampToEdgeWrapping = 1; THREE.MirroredRepeatWrapping = 2; THREE.NearestFilter = 3; THREE.NearestMipMapNearestFilter = 4;三。 NearestMipMapLinearFilter = 5; THREE.LinearFilter = 6; THREE.LinearMipMapNearestFilter = 7; THREE.LinearMipMapLinearFilter = 8; THREE.ByteType = 9; THREE.UnsignedByteType = 10; THREE.ShortType = 11; THREE.UnsignedShortType = 12; THREE.IntType = 13; THREE.UnsignedIntType = 14; THREE.FloatType = 15;三。AlphaFormat = 16; THREE.RGBFormat = 17; THREE.RGBAFormat = 18; THREE.LuminanceFormat = 19; THREE.LuminanceAlphaFormat = 20; THREE.Particle =函数（）{THREE.Object3D.call（本）; this.material = a}; THREE.Particle.prototype = new THREE.Object3D; THREE.Particle.prototype.constructor = THREE.Particle; THREE.Line = function（a，b，c）{THREE.Object3D.call（this）; this。 geometry = a; this.material = b; this.type = c！== void 0？c：THREE.LineStrip; this.geometry &&（this.geometry.boundingSphere || this.geometry.computeBoundingSphere（））}; THREE。 LineStrip = 0; THREE.LinePieces = 1; THREE.Line.prototype = new THREE.Object3D; THREE.Line.prototype.constructor = THREE.Line; THREE.Mesh = function（a，b）{THREE.Object3D.call（ this）; this.geometry = a; this.material = b; if（b instanceof Array）console.warn（“DEPRECATED：Mesh material can not be a Array。Using material at index 0 ...”）。材料= b [0];如果（在此。几何&&（this.geometry.boundingSphere || this.geometry.computeBoundingSphere（），this.boundRadius = a.boundingSphere.radius，this.geometry.morphTargets.length））{this.morphTargetBase = -1; this.morphTargetForcedOrder = [] ; this.morphTargetInfluences = []; this.morphTargetDictionary = {}; for（var c = 0; c <this.geometry.morphTargets.length; c ++）this.morphTargetInfluences.push（0），this.morphTargetDictionary [this.geometry .morphTargets [c] .name] = c}}; THREE.Mesh.prototype = new THREE.Object3D; THREE.Mesh.prototype.constructor = THREE.Mesh; THREE.Mesh.prototype.supr = THREE.Object3D.prototype; THREE.Mesh.prototype.getMorphTargetIndexByName = function（a）{if（this.morphTargetDictionary [a]！== void 0）return this.morphTargetDictionary [a]; console.log（“THREE.Mesh.getMorphTargetIndexByName：morph target”+ a +“不存在。返回0。”）; return 0}; THREE。Bone = function（a）{THREE.Object3D.call（this）; this.skin = a; this.skinMatrix = new THREE.Matrix4}; THREE.Bone.prototype = new THREE.Object3D; THREE.Bone.prototype.constructor = THREE.Bone; THREE.Bone.prototype.supr = THREE.Object3D.prototype; THREE.Bone.prototype.update =函数（A，b）{this.matrixAutoUpdate &&（b | = this.updateMatrix（））;如果（ b || this.matrixWorldNeedsUpdate）a？this.skinMatrix.multiply（a，this.matrix）：this.skinMatrix.copy（this.matrix），this.matrixWorldNeedsUpdate =！1，b =！0; var c，d = this.children.length;对于（C = 0;?<d; C ++）this.children并[c] .update（this.skinMatrix，b）}; THREE.Sprite =函数（）{THREE.Object3D.call（这个）; this.color = a.color！== void 0？new THREE.Color（a.color）：new THREE.Color（16777215）; this.map = a.map instanceof THREE.Texture？a.map： THREE.ImageUtils.loadTexture（a.map）; this.blending = a.blending！== void 0？a.blending：THREE.NormalBlending; this。useScreenCoordinates = a.useScreenCoordinates！== void 0？a.useScreenCoordinates：！0; this.mergeWith3D = a.mergeWith3D！== void 0？a.mergeWith3D：！this.useScreenCoordinates; this.affectedByDistance = a.affectedByDistance！== void 0？a.affectedByDistance：！this.useScreenCoordinates; this.scaleByViewport = a.scaleByViewport！== void 0？a.scaleByViewport：！this.affectedByDistance; this.alignment = a.alignment instanceof THREE.Vector2？a.alignment： THREE.SpriteAlignment.center; this.rotation3d = this.rotation; this.rotation = 0; this.opacity = 1; this.uvOffset = new THREE.Vector2（0,0）; this.uvScale = new THREE.Vector2（1 ，1）}; THREE.Sprite.prototype = new THREE.Object3D; THREE.Sprite.prototype.constructor = THREE.Sprite; THREE.Sprite.prototype.updateMatrix = function（）{this.matrix.setPosition（this.position） ; this.rotation3d.set（0,0，this.rotation）; this.matrix.setRotationFromEuler（this.rotation3d）;如果（this.scale。X == 1个|| this.scale.y == 1）this.matrix.scale（this.scale），this.boundRadiusScale = Math.max（this.scale.x，this.scale.y）;！此THREE.SpriteAlignment.topLeft = new THREE.Vector2（1，-1）; THREE.SpriteAlignment.topCenter = new THREE.Vector2（0，-1）; THREE.SpriteAlignment.topLeft = new THREE.Vector2（1，-1）; THREE.SpriteAlignment.topCenter = new THREE.Vector2（0，-1）; THREE。 SpriteAlignment.topRight = new THREE.Vector2（-1，-1）; THREE.SpriteAlignment.centerLeft = new THREE.Vector2（1,0）; THREE.SpriteAlignment.center = new THREE.Vector2（0,0）; THREE。 SpriteAlignment.centerRight = new THREE.Vector2（-1,0）; THREE.SpriteAlignment.bottomLeft = new THREE.Vector2（1,1）; THREE.SpriteAlignment.bottomCenter = new THREE.Vector2（0,1）; THREE.SpriteAlignment .bottomRight = new THREE.Vector2（-1,1）; THREE.Scene = function（）{THREE.Object3D.call（this）; this.overrideMaterial = this.fog = null; this.matrixAutoUpdate =！1; this。对象= []; this.lights = [];这.__ objectsAdded = [];这一点。__objectsRemoved = []}; THREE.Scene.prototype = new THREE.Object3D; THREE.Scene.prototype.constructor = THREE.Scene; THREE.Scene.prototype.addObject = function（a）{if（THREE.Light的一个实例） this.lights.indexOf（a）===  -  1 && this.lights.push（a）; else if（！（THREE.Camera || instanceof THREE.Bone）&& this.objects.indexOf（a）=== -1）{this.objects.push（a）; this .__ objectsAdded.push（a）; var b = this .__ objectsRemoved.indexOf（a）; b！==  -  1 && this .__ objectsRemoved.splice（b，1）} for（b = 0; b <a.children.length; b ++）this.addObject（a.children [b]）}; THREE.Scene.prototype.removeObject = function（a）{if（THREE.Light的一个实例） {var b = this.lights.indexOf（a）; b！==  -  1 && this.lights.splice（b，1）} else THREE.Camera ||（b = this.objects.indexOf（a），b ！==  -  1 &&（this.objects.splice（b，1），这.__ objectsRemoved.push（A），b =此.__ objectsAdded.indexOf（A），b！==  -  1 &&此.__ objectsAdded.splice（B，1）））;对于（B = 0，B <a.children.length; b ++）this.removeObject（a.children并[b]）}; THREE.CanvasRenderer =函数（a）{函数b（a）{if（C！= a）k.globalAlpha = C = a}函数c（a）{if（Q！= a）{switch（a）{case THREE.NormalBlending：k .globalCompositeOperation =“source-over”; break; case THREE.AdditiveBlending：k.globalCompositeOperation =“lighter”; break; case THREE.SubtractiveBlending：k.globalCompositeOperation =“darker”} Q = a}} function d（a）{如果（O！= a）k.strokeStyle = O = a}函数f（a）{if（w！= a）k.fillStyle = w = a} var e = this，g，h，m，l = new THREE.Projector，a = a || {}，j = a.canvas！== void 0？a.canvas：document.createElement（“canvas”），i，n，o，p，k = j.getContext “2d”），s = new THREE.Color（0），K = 0，C = 1，Q = 0，O = null，w = null，F = null，z = null，D = null，u，r ，E，N，W = new THREE.RenderableVertex，da = new THREE.RenderableVertex，G，H，I，Y，L，B，S，v，R，P，V，J，t = new THREE.Color，A = new THREE.Color，x = new THREE.Color，y = new THREE.Color，M = new THREE.Color，la = []，fa = []，ga ，ha，ea，aa，Ba，Ca，Da，Ea，Fa，Ga，ma = new THREE.Rectangle，Z = new THREE.Rectangle，X = new THREE.Rectangle，ya =！1，$ = new THREE。颜色，ta = new THREE.Color，ua = new THREE.Color，T = new THREE.Vector3，qa，ra，za，ba，sa，va，a = 16; qa = document.createElement（“canvas”）; qa.width = qa.height = 2; RA = qa.getContext（ “2D”）; ra.fillStyle = “RGBA（0,0,0,1）”; ra.fillRect（0,0,2,2） ; ZA = ra.getImageData（0,0,2,2）; BA = za.data; SA =使用document.createElement（ “画布”）; sa.width = sa.height =一个; VA = sa.getContext（” 2D“）; va.translate（-a / 2，-a / 2）; va.scale（A，A）;一 - ; this.domElement = j的; this.sortElements = this.sortObjects = this.autoClear = ！0; this.info = {渲染：{顶点：0，面临：0}}; this.setSize =函数（A，b）{I = A; N = b; O = Math.floor（I / 2） ; p = Math.floor（N / 2）; j.width = I; j.height = N;毫安。集（-o，-p，O，P）; Z.set（-o，-p，O，P）; C = 1; Q = 0; d = Z = F = W = O = NULL};此.setClearColor =函数（A，b）{s.copy的（a）; K = b; Z.set（-o，-p，O，p）}; this.setClearColorHex =函数（A，b）{S。 setHex的（a）; K = b; Z.set（-o，-p，O，p）}; this.clear =函数（）{k.setTransform（1,0,0，-1，O，p） ; Z.isEmpty（）||（Z.minSelf（MA），Z.inflate（2），K <1 && k.clearRect（Math.floor（Z.getX（）），Math.floor（Z.getY（）） ，Math.floor（Z.getWidth（）），Math.floor（Z.getHeight（））），K> 0 &&（C（THREE.NormalBlending），b（1）中，f（ “RGBA（” + Math.floor （SR * 255）+ “ ”+ Math.floor（SG * 255）+“， ”+ Math.floor（SB * 255）+“， ”+ K +“）”），k.fillRect（Math.floor（ Z.getX（）），Math.floor（Z.getY（）），Math.floor（Z.getWidth（）），Math.floor（Z.getHeight（）））），Z.empty（））}; this.render = function（a，j）{function i（a）{var b，c，d，e; $。setRGB（0,0,0）; ta.setRGB（0,0,0）; ua。 setRGB（0,0,0）; b = 0;对于（C =则为a.length，b <C; b ++）d = A [b]，E = d.color，例如THREE.AmbientLight？（$。r + = er，$。g + = eg，$。b + = eb）：d实例的THREE.DirectionalLight？（ta.r + = er，ta.g + =例如ta.b + = eb ）：函数n（a，b，c，d）{var e，f，g，h，k， j; e = 0; for（f = a.length; e <f; e ++）g = a [e]，h = g.color，g instanceof THREE.DirectionalLight？（k = g.matrixWorld.getPosition（）， J = c.dot（K）中，j <= 0 ||（j * = g.intensity，D.R + =小时*?，d.g + =汞柱・?，d.b + = HB * j）条）：克instanceof THREE.PointLight &&（k = g.matrixWorld.getPosition（），j = c.dot（T.sub（k，b）.normalize（）），j <= 0 ||（j * = g.distance == 0 1：？！1- Math.min（b.distanceTo（k）的/g.distance,1）中，j = 0 &&（j * = g.intensity，D.R + =小时*?，d.g + =汞柱・ j，d.b + = hb * j）））}函数s（a，e，g）{b（g.opacity）; c（g.blending）; var h，j，i，m，q，n; if（g instanceof THREE.ParticleBasicMaterial）{if（g.map）m = g.map.image，q = m.width >> 1，n = m.height >> 1，g = e.scale.x * o I = e.scale.y * p，H = G * Q，J = * N，X.set（AX-H，AY-j中，a.x + H，a.y + j）中，ma.intersects（X）&&（k.save（） ，k.translate（AX，AY），k.rotate（-e.rotation），k.scale（克，-i），k.translate（-q，-n），k.drawImage（M，0,0 ），k.restore（））} else g instanceof THREE.ParticleCanvasMaterial &&（h = e.scale.x * o，j = e.scale.y * p，X.set（ax-h，ay-j，a。 X + H，a.y + j）中，ma.intersects（X）&&（d（g.color.getContextStyle（））中，f（g.color.getContextStyle（）），k.save（），k.translate （ax，ay），k.rotate（-e.rotation），k.scale（h，j），g.program（k），k.restore（）））} function w（a，e，f，g ）{b（g.opacity）; C（g.blending）; k.beginPath（）; k.moveTo（a.positionScreen.x，a.positionScreen.y）; k.lineTo（e.positionScreen.x，电子.positionScreen.y）; k.closePath（）; if（g instanceof THREE.LineBasicMaterial）{a = g.linewidth; if（F！= a）k.lineWidth = F = a; a = g.linecap; if Z =一）k.lineCap = Z =一个;！A = g.linejoin;若（d =一）k.lineJoin = d =一;！d（g.color.getContextStyle（））; k.stroke（） ; X.inflate（克。linewidth * 2）}}函数C（a，d，f，g，h，k，i，q）{e.info.render.vertices + = 3; e.info.render.faces ++; b（q.opacity） C（q.blending）; G = a.positionScreen.x; H = a.positionScreen.y; I = d.positionScreen.x; Y = d.positionScreen.y; L = f.positionScreen.x; B = f.positionScreen.y; K（G，H，I，Y，L，B）; if（q instanceof THREE.MeshBasicMaterial）if（q.map）q.map.mapping instanceof THREE.UVMapping &&（aa = i.uvs [0]，AA（G，H，I，Y，L，B，AA [克] .U，AA并[g] .V，AA并[h] .U，AA并[h] .V，AA [K] .u，aa [k] .v，q.map））; else if（q.envMap）{if（q.envMap.mapping instanceof THREE.SphericalReflectionMapping）a = j.matrixWorldInverse，T.copy（i.vertexNormalsWorld [克]），BA =器（Tx * a.n11 +泰* a.n12 + Tz的* a.n13）* 0.5 + 0.5，CA =  - （*的Tx + a.n21泰 -  * a.n22 + Tz的*一个。 N23）* 0.5 + 0.5，T.copy（i.vertexNormalsWorld并[h]），DA =器（Tx * a.n11 +泰* a.n12 + Tz的* a.n13）* 0.5 + 0.5，EA =  - （的Tx * a.n21 +泰* a.n22 + Tz的* a.n23）* 0.5 + 0.5，T.copy（i.vertexNormalsWorld [K]），FA =器（Tx * a.n11 +泰* a.n12 + Tz的* a.n13）* 0.5 + 0.5，GA =  - （*的Tx + a.n21泰 -  * a.n22 + Tz的* a.n23）* 0.5 + 0.5，AA（G，H，I，Y，L，B，包括BA，CA，DA，EA，发，g，q.envMap）} else q.wireframe？ja（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color）; else if（q instanceof THREE.MeshLambertMaterial）q。 map &&！q.wireframe &&（q.map.mapping instanceof THREE.UVMapping &&（aa = i.uvs [0]，Aa（G，H，I，Y，L，B，aa [g] .u，aa [g] .V，AA并[h] .U，AA并[h] .V，AA [K] .U，AA [K] .V，q.map）），C（THREE.SubtractiveBlending）），亚？！q值。线框&& q.shading == THREE.SmoothShading && i.vertexNormalsWorld.length == 3？（AR = XR =年= $ R，银= XG = YG = $。克，抗体= XB = YB = $。b，N（米，i.v1.positionWorld，i.vertexNormalsWorld [0]，A）中，n（M，i.v2.positionWorld，i.vertexNormalsWorld [1]中，x）中，n（M，i.v3.positionWorld，i.vertexNormalsWorld [2]，Y）中，Ar = Math.max（0，Math.min（q.color.r *的Ar，1）），银= Math.max（0，Math.min（q.color.g *银，1）），抗体= Math.max（0，Math.min（q.color.b * AB，1））中，x。R = Math.max（0，Math.min（q.color.r * XR，1）），XG = Math.max（0，Math.min（q.color.g * XG，1）），XB = Math.max（0，Math.min（q.color.b * XB，1）），YR = Math.max（0，Math.min（q.color.r *年，1）），YG =数学。 MAX（0，Math.min（q.color.g * YG，1）），YB = Math.max（0，Math.min（q.color.b * YB，1）），MR =（x.r +年）* 0.5中，Mg =（x.g + YG）* 0.5，MB =（x.b + YB）* 0.5，EA = WA（A，X，Y，M），OA（G，H，I ，Y，L，b，0,0,1,0,0,1，EA））:( TR = $ R，TG = $。克，TB = $。b，N（M，i.centroidWorld， i.normalWorld，T），TR = Math.max（0，Math.min（q.color.r * TR，1）），TG = Math.max（0，Math.min（q.color.g * TG ，1）），TB = Math.max（0，Math.min（q.color.b * TB，1）），q.wireframe JA（T，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）？： ia（t））：q.wireframe？ja（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color）; else if（q instanceof THREE.MeshDepthMaterial）ga = j.near ，公顷= j.far中，Ar =银= | AB | = 1-NA（a.positionScreen.z，GA，HA），XR = XG = XB = 1-NA（d。positionScreen.z，GA，公顷），YR = YG = YB = 1-NA（f.positionScreen.z，GA，HA），MR =（x.r +岁）* 0.5中，Mg =（x.g + YG ）* 0.5，MB =（x.b + YB）* 0.5，EA = WA（A，X，Y，M），OA（G，H，I，Y，L，B，0,0,1,0 ，0,1，ea）; else if（THREE.MeshNormalMaterial的实例）tr = pa（i.normalWorld.x），tg = pa（i.normalWorld.y），tb = pa（i.normalWorld.z）， q.wireframe？ja（t，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（t）} function Q（a，d，f，g，h，k，i，q，o）{e。 info.render.vertices + = 4; e.info.render.faces ++; b（q.opacity）; C（q.blending）;如果（q.map || q.envMap）C（A，d，G，0 ，1,3，i，q，o），C（h，f，k，1,2,3，i，q，o）;否则if（G = a.positionScreen.x，H = a.positionScreen。 Y，I = d.positionScreen.x，Y = d.positionScreen.y，L = f.positionScreen.x，B = f.positionScreen.y，S = g.positionScreen.x，v = g.positionScreen.y， R = h.positionScreen.x，P = h.positionScreen.y，V = k.positionScreen.x，J = k.positionScreen.y，q instanceof THREE.MeshBasicMaterial）O（G，H，I，Y，L， B，S，v）中，q。线框？ja（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color）;否则if（q instanceof THREE.MeshLambertMaterial）ya？！q.wireframe && q.shading == THREE.SmoothShading && i .vertexNormalsWorld.length == 4？（AR = XR =年= MR = $ R，银= XG = YG =镁= $。克，抗体= XB = YB = MB = $。b，N（M，I .v1.positionWorld，i.vertexNormalsWorld [0]，A）中，n（M，i.v2.positionWorld，i.vertexNormalsWorld [1]中，x）中，n（M，i.v4.positionWorld，i.vertexNormalsWorld [3 ]，Y）中，n（M，i.v3.positionWorld，i.vertexNormalsWorld [2]，M）中，Ar = Math.max（0，Math.min（q.color.r *的Ar，1）），银= Math.max（0，Math.min（q.color.g *的Ag，1）），抗体= Math.max（0，Math.min（q.color.b * AB，1）），XR =数学的.max（0，Math.min（q.color.r * XR，1）），XG = Math.max（0，Math.min（q.color.g * XG，1）），XB = Math.max （0，Math.min（q.color.b * XB，1）），YR = Math.max（0，Math.min（q.color.r *年，1）），YG = Math.max（0 ，Math.min（q.color.g * YG，1）），YB = Math.max（0，Math.min（q。color.b * YB，1）），MR = Math.max（0，Math.min（q.color.r *先生，1））中，Mg = Math.max（0，Math.min（q.color。 G *的Mg，1）），MB = Math.max（0，Math.min（q.color.b * MB，1）），EA = WA（A，X，Y，M），K（G，H ，I，Y，S，v），OA（G，H，I，Y，S，v，0,0,1,0,0,1，EA），K（R，P，L，B，v ，J），OA（R，P，L，B，V，J，1,0,1,1,0,1，EA））:( TR = $ R，TG = $。克，TB = $ .B，N（米，i.centroidWorld，i.normalWorld，T），TR = Math.max（0，Math.min（q.color.r * TR，1）），TG = Math.max（0， Math.min（q.color.g * TG，1）），TB = Math.max（0，Math.min（q.color.b * TB，1）），O（G，H，I，Y， L，B，S，v），q.wireframe JA（T，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：IA（t））的:( O（G，H，I，Y，L，B ，s，v），q.wireframe？ja（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color））; else if（q instanceoY，S，V，0,0,1,0,0,1，EA），K（R，P，L，B，V，J），OA（R，P，L，B，V，J， 1,0,1,1,0,1，EA））:( TR = $ R，TG = $。克，TB = $。b，N（M，i.centroidWorld，i.normalWorld，T）， TR = Math.max（0，Math.min（q.color.r * TR，1）），TG = Math.max（0，Math.min（q.color.g * TG，1）），TB = Math.max（0，Math.min（q.color.b * TB，1）），O（G，H，I，Y，L，B，S，v），q.wireframe？JA（T，q .wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：IA（t））的:( O（G，H，I，Y，L，B，S，v），q.wireframe JA（q.color中，q？ wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color））; else if（q instanceoY，S，V，0,0,1,0,0,1，EA），K（R，P，L，B，V，J），OA（R，P，L，B，V，J， 1,0,1,1,0,1，EA））:( TR = $ R，TG = $。克，TB = $。b，N（M，i.centroidWorld，i.normalWorld，T）， TR = Math.max（0，Math.min（q.color.r * TR，1）），TG = Math.max（0，Math.min（q.color.g * TG，1）），TB = Math.max（0，Math.min（q.color.b * TB，1）），O（G，H，I，Y，L，B，S，v），q.wireframe？JA（T，q .wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：IA（t））的:( O（G，H，I，Y，L，B，S，v），q.wireframe JA（q.color中，q？ wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（q.color））; else if（q instanceo（O（G，H，I，Y，L，B，S，V），q.wireframe JA（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：IA（q.color）） ;否则if（q instanceo（O（G，H，I，Y，L，B，S，V），q.wireframe JA（q.color，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：IA（q.color）） ;否则if（q instanceo（三）.MeshNormalMaterial）tr = pa（i.normalWorld.x），tg = pa（i.normalWorld.y），tb = pa（i.normalWorld.z），O（G，H，I，Y，L， B，S，v），q.wireframe？ja（t，q.wireframeLinewidth，q.wireframeLinecap，q.wireframeLinejoin）：ia（t）;否则if（THREE.MeshDepthMaterial的实例）ga = j.near，ha = j.far中，Ar =银= | AB | = 1-NA（a.positionScreen.z，GA，HA），XR = XG = XB = 1-NA（d.positionScreen.z，GA，公顷），YR = YG = YB = 1-NA（g.positionScreen.z，GA，HA），MR =镁= MB = 1-NA（f.positionScreen.z，GA，HA），EA = WA（A，X，Y，M） ，K（G，H，I，Y，S，v），OA（G，H，I，Y，S，v，0,0,1,0,0,1，EA），K（R，P （a，b，c，d，L，B，V，J），oa（R，P，L，B，V，J，1,0,1,1,0,1，ea）}函数K E，F）{k.beginPath（）; k.moveTo（A，b）; k.lineTo（C，d）; k.lineTo（E，F）; k.lineTo（A，b）; k.closePath （），函数O（a，b，c，d，e，f，g，h）{k.beginPath（）; k.moveTo（a，b）; k.lineTo（c，d）; k.lineTo （e，f）; k.lineTo（g，h）; k.lineTo（a，b）; k.closePath（）}函数ja（a，b，c，e）{if（F！= b）k .lineWidth = F = b;若（Z = C！）k.lineCap = Z = C;如果（d = E！）K。lineJoin = D = e; d（a.getContextStyle（））; k.stroke（）; X.inflate（b * 2）} function ia（a）{f（a.getContextStyle（））; k.fill（） }函数Aa（a，b，c，d，e，g，h，i，j，m，o，n，l）{if（l.image.width！= 0）{if（l.needsUpdate == ！0 || la [l.id] == void 0）{var p = l.wrapS == THREE.RepeatWrapping，r = l.wrapT == THREE.RepeatWrapping; la [l.id] = k.createPattern（ ？l.image，对&& R “重复”：p && R “重复 -  X”：p && R “重复-Y”： “不重复”）; l.needsUpdate = 1} F（LA [l.id！？！？！ ]）; var p = l.offset.x / l.repeat.x，r = l.offset.y / l.repeat.y，s = l.image.width * l.repeat.x，u = 1。 image.height * l.repeat.y，H =（H + p）×S，I =（I + R）* U，J =（J + p）×S，M =（M + R）* U， O =（O + p）×S，N =（N + R）* U; C- =一个; D- = b; E- =一个; G- = b; J- = H;间 -  = I; o = h; n = i; p = j * no * m; if（p == 0）{if（fa [l.id] == void 0）b = document.createElement（“canvas”）， b.width = l.image.width，b.height = l.image.height，A = b.getContext（ “2D”），a.drawImage（l.image，0,0），fa [l.id] = a.getImageData（0,0，l.image.width，l.image.height）.data，delete b; b = fa [l.id]; h =（Math.floor（h ）+ Math.floor（I）* l.image.width）* 4; t.setRGB（b并[h] / 255，b [H + 1] / 255，b [H + 2] / 255）; IA（ t）}其他p = 1 / p，l =（n * cm * e）* p，m =（n * dm * g）* p，c =（j * eo * c）* p，d = * *去d）* p，A =ΔL* HC * I，H = BM * H-
（a，b，c，d），其中， ，e，f，g，h，i，j，l，m，o）{var n，p; n = o.width-1; p = o.height-1; g * = n; h * = p ;我* = N;?* = p; L * = N; M * = p; C- =一个; D- = b; E- =一个; F- = b;异=克; J- = H ; 1- =克;间 -  = H，p = 1 /（I *毫升* j）的; N =（M * * CJ E）* p; J =（M * DJ * F）* p C =（我* EL * C）* p; d =（I * FL * d）* p; A =一个* GC * H; b = BJ * GD * H; k.save（）; k.transform（N，J ，c，d，a，b）; k.clip（）; k.drawImage（o，0,0）; k.restore（）}函数wa（a，b，c，d）{var e = ~~ （AR * 255）中，f = ~~（AG * 255）中，a = ~~（AB * 255）中，g = ~~（BR * 255），H = ~~（BG * 255），b = ~~ （BB * 255）中，i = ~~（CR * 255）中，j = ~~（CG * 255），C = ~~（CB * 255）中，k = ~~（DR * 255）中，l = ~~ （DG * 255），d = ~~（分贝* 255）; BA [0] = E <0 0：E'> 255 255：é; BA [1] = F <0 0：F？> 255？ 255：F; BA [2] = A <0 0：一个？> 255 255：一个; BA [4] = G <0 0：克？> 255 255：克; BA [5] = H <0 ？0：H> 255 255：H; BA [6] = b <0 0：b> 255 255：？b; BA [8] = I <0 0：I> 255 255：？？I;巴[9] = j的<0 0：J?> 255 255：焦耳; BA [10] = C <0 0：C？> 255 255：C; BA [12] = K <？0 0：K>255 255：・K; BA [13] = 1 <0 0：L'> 255 255：升; BA [14] = d <0 0：d？> 255 255：d; ra.putImageData（ZA， 0,0）; va.drawImage（qa，0,0）; return sa}函数na（a，b，c）{a =（ab）/（cb）; return a * a *（3-2 * a ）}函数pa（a）{a =（a + 1）* 0.5;返回a <0？0：a> 1？1：a}函数ka（a，b）{var c = bx-ax，d =通过-AY，E = C * C + d * d;！E = 0 &&（E = 1 / Math.sqrt（e）中，C * = E，d * = E，b.x + = C，b.y + = d，ax- = c，ay- = d）} var xa，Ha，U，ca; this.autoClear？this.clear（）：k.setTransform（1,0,0，-1，o，p）; e.info.render.vertices = 0; e.info.render.faces = 0; G = l.projectScene（A，J this.sortElements）; H = g.elements; M = g.lights;（YA =对于（Ha = h.length; xa <Ha; xa ++）如果（U = h [xa]，ca = U.material，ca = ca实例为THREE），则xa = 0。 MeshFaceMaterial？U.faceMaterial：ca，！（ca == null || ca.opacity == 0））{X.empty（）; if（U instanceof THREE.RenderableParticle）u = U，ux * = o，uy * = p，s（u，U，ca，a）;否则if（U的实例为THREE.RenderableLine）u = U.v1，r = U.v2，u。positionScreen.x * = O，u.positionScreen.y * = P，r.positionScreen.x * = O，r.positionScreen.y * = P，X.addPoint（u.positionScreen.x，u.positionScreen.y） ，X.addPoint（r.positionScreen.x，r.positionScreen.y），ma.intersects（X）&& w（u，r，U，ca，a）;否则if（U的实例是THREE.RenderableFace3）u = U。 V1，R = U.v2，E = U.v3，u.positionScreen.x * = O，u.positionScreen.y * = p，r.positionScreen.x * = O，r.positionScreen.y * = p， E.positionScreen.x * = O，E.positionScreen.y * = p，ca.overdraw &&（KA（u.positionScreen，r.positionScreen），KA（r.positionScreen，E.positionScreen），KA（E.positionScreen， u.positionScreen）），X.add3Points（u.positionScreen.x，u.positionScreen.y，r.positionScreen.x，r.positionScreen.y，E.positionScreen.x，E.positionScreen.y），ma.intersects （X）&& C（u，r，E，0,1,2，U，ca，a）; else if（U实例的THREE.RenderableFace4）u = U.v1，r = U.v2，E = U.v3 ，N = U.v4，u.positionScreen.x * = O，u.positionScreen.y * = p，R。positionScreen.x * = O，r.positionScreen.y * = P，E.positionScreen.x * = O，E.positionScreen.y * = P，N.positionScreen.x * = O，N.positionScreen.y * = p，W.positionScreen.copy（r.positionScreen），da.positionScreen.copy（N.positionScreen），ca.overdraw &&（KA（u.positionScreen，r.positionScreen），KA（r.positionScreen，N.positionScreen）， KA（N.positionScreen，u.positionScreen），KA（E.positionScreen，W.positionScreen），KA（E.positionScreen，da.positionScreen）），X.addPoint（u.positionScreen.x，u.positionScreen.y） ，X.addPoint（r.positionScreen.x，r.positionScreen.y），X.addPoint（E.positionScreen.x，E.positionScreen.y），X.addPoint（N.positionScreen.x，N.positionScreen.y ），ma.intersects（X）&& Q（U，R，E，N，W，DA，U，CA，A）; Z.addRectangle（X）} k.setTransform（1,0,0,1,0， 0）}}; THREE.RenderableVertex = function（）{this.positionWorld = new THREE.Vector3; this.positionScreen = new THREE.Vector4; this.visible =！0}; THREE。RenderableVertex.prototype.copy = function（a）{this.positionWorld.copy（a.positionWorld）; this.positionScreen.copy（a.positionScreen）}; THREE.RenderableFace3 = function（）{this.v1 = new THREE.RenderableVertex ; this.v2 = new THREE.RenderableVertex; this.v3 = new THREE.RenderableVertex; this.centroidWorld = new THREE.Vector3; this.centroidScreen = new THREE.Vector3; this.normalWorld = new THREE.Vector3; this.vertexNormalsWorld = [new THREE.Vector3，new THREE.Vector3，new THREE.Vector3]; this.faceMaterial = this.material = null; this.uvs = [[]]; this.z = null}; THREE.RenderableFace4 = function（） {this.v1 = new THREE.RenderableVertex; this.v2 = new THREE.RenderableVertex; this.v3 = new THREE.RenderableVertex; this.v4 = new THREE.RenderableVertex; this.centroidWorld = new THREE.Vector3; this.centroidScreen = new THREE.Vector3; this.normalWorld = new THREE.Vector3; this.vertexNormalsWorld = [new THREE.Vector3，new three。Vector3，new THREE.Vector3，new THREE.Vector3]; this.faceMaterial = this.material = null; this.uvs = [[]]; this.z = null}; THREE.RenderableObject = function（）{this.z = this.object = null}; THREE.RenderableParticle = function（）{this.rotation = this.z = this.y = this.x = null; this.scale = new THREE.Vector2; this.material = null}; THREE.RenderableLine = function（）{this.z = null; this.v1 = new THREE.RenderableVertex; this.v2 = new THREE.RenderableVertex; this.material = null};